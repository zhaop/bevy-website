


  



  
  
  
    
    
  
    
    
  
    
    
      
      





  
    
  



  



  
    
  



<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta property="og:title" content="0.13 to 0.14" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://bevyengine.org&#x2F;&#x2F;learn&#x2F;migration-guides&#x2F;0-13-to-0-14&#x2F;" />
    <meta property="og:image"
          content="https://bevyengine.org/assets/bevy_logo_fill.png" />
    <meta property="og:description"
          content="Bevy is a refreshingly simple data-driven game engine built in Rust. It is free and open-source forever!" />
    <link rel="shortcut icon" type="image/png" href="/assets/favicon.png">
    <link rel="stylesheet" href="/site.css" />
    <link href="/atom.xml" rel="alternate" type="application/atom+xml" />
    
    <meta name="robots" content="noindex, nofollow, noarchive">
    

    <title>[DRAFT] 0.13 to 0.14</title>
    
  

  
    
    
  
    
    
  
    
    
  

  <script src="/optional-helpers.js"></script>
  <script defer src="/on-this-page.js"></script>

  </head>
  <body>
    <div class="layout">
      <input id="mobile-menu-state" class="hidden" type="checkbox">
      <header class="layout__header header print:hidden" data-mobile-menu-state-container>
        <div class="header__content">
          <label class="main-menu-backdrop" for="mobile-menu-state"></label>
          <label class="header__hamburger button-square button-square--header"
                  for="mobile-menu-state">
            <img src="/assets/icon-hamburger.svg"
                  alt="Three horizontal lines stacked on top of eachother"
                  width="20"
                  height="16">
          </label>
          <div class="header__left-block">
            <a class="header__logo" href="/">
              <img class="logo"
                    src="/assets/bevy_logo_dark.svg"
                    alt="Bevy Engine"
                    width="520"
                    height="130">
            </a>
            <div class="header__message">
              
  
    
      Migration Guides
    
  

            </div>
          </div>
          
  <input id="page-menu-switch-state" class="hidden" type="checkbox" checked>

          <nav class="header__menu main-menu main-menu--with-page-menu"
                role="navigation"
                data-page-menu-switch-state-container>
            <div class="main-menu__header">
              <a href="/">
                <img class="logo"
                      src="/assets/bevy_logo_dark.svg"
                      alt="Bevy Engine"
                      width="520"
                      height="130">
              </a>
              <label class="button-square button-square--header" for="mobile-menu-state">
                <img src="/assets/icon-times.svg"
                      alt="A saltire or x-cross"
                      width="16"
                      height="16">
              </label>
            </div>
            
  <div class="main-menu__page-menu-switch">
    <label class="menu-switch" for="page-menu-switch-state">
      <div class="menu-switch__option menu-switch__option--main-menu">Main Menu</div>
      <div class="menu-switch__option menu-switch__option--page-menu">
        
  
  
    
      Migration Guides
    
  


      </div>
    </label>
  </div>

            <div class="main-menu__content">
              <div class="main-menu__page-menu">
                
  
  <ul class="tree-menu">
    
    
    
    
    
      
        
          
  
  
  
  
  
  
  
  <li class="tree-menu__item">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;introduction&#x2F;">Introduction</a>
      
    </div>
  </li>

        
      
        
          
  
  
  
  
  
  
    
  
  
    
    
      
    
  
  <li class="tree-menu__item tree-menu__item--active public_draft active_draft">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;0-13-to-0-14&#x2F;">0.13 to 0.14</a>
      
        
<nav aria-label="On This Page" class="on-this-page tree-menu__toc">
  
  <ul>
  
    <li>
      <a href="#fix-node2d-typo">Fix Node2d typo</a>
      
    </li>
  
    <li>
      <a href="#update-to-fixedbitset-0-5">Update to fixedbitset 0.5</a>
      
    </li>
  
    <li>
      <a href="#move-wasm-panic-handler-from-logplugin-to-panichandlerplugin">Move WASM panic handler from LogPlugin to PanicHandlerPlugin</a>
      
    </li>
  
    <li>
      <a href="#animationclip-now-uses-uuids-and-nooptypeidhash-is-now-noophash">AnimationClip now uses UUIDs and NoOpTypeIdHash is now NoOpHash</a>
      
    </li>
  
    <li>
      <a href="#multiplying-linearrgba-by-f32-no-longer-ignores-alpha-channel">Multiplying LinearRgba by f32 no longer ignores alpha channel</a>
      
    </li>
  
    <li>
      <a href="#separate-subapp-from-app">Separate SubApp from App</a>
      
        <ul>
          
          <li>
            <a href="#constructing-a-subapp">Constructing a SubApp</a>
          </li>
          
          <li>
            <a href="#app-changes">App changes</a>
          </li>
          
          <li>
            <a href="#3rd-party-traits-on-app">3rd-party traits on App</a>
          </li>
          
        </ul>
      
    </li>
  
    <li>
      <a href="#make-appexit-more-specific-about-exit-reason">Make AppExit more specific about exit reason</a>
      
    </li>
  
    <li>
      <a href="#deprecate-dynamic-plugins">Deprecate dynamic plugins</a>
      
    </li>
  
    <li>
      <a href="#move-state-initialization-methods-to-bevy-state">Move state initialization methods to bevy::state</a>
      
    </li>
  
    <li>
      <a href="#remove-the-updateassets-and-assetevents-schedules">Remove the UpdateAssets and AssetEvents schedules</a>
      
    </li>
  
    <li>
      <a href="#use-async-fn-in-traits-rather-than-boxedfuture">Use async fn in traits rather than BoxedFuture</a>
      
    </li>
  
    <li>
      <a href="#add-ignore-variant-to-processresult">Add Ignore variant to ProcessResult</a>
      
    </li>
  
    <li>
      <a href="#removed-into-assedid-t-for-handle-t">Removed Into&lt;AssedId&lt;T&gt;&gt; for Handle&lt;T&gt;</a>
      
    </li>
  
    <li>
      <a href="#add-asyncseek-trait-to-reader-to-be-able-to-seek-inside-asset-loaders">Add AsyncSeek trait to Reader to be able to seek inside asset loaders</a>
      
    </li>
  
    <li>
      <a href="#add-error-info-to-loadstate-failed">Add error info to LoadState::Failed</a>
      
    </li>
  
    <li>
      <a href="#make-assetmetacheck-a-field-of-assetplugin">Make AssetMetaCheck a field of AssetPlugin</a>
      
    </li>
  
    <li>
      <a href="#make-loadcontext-use-the-builder-pattern">Make LoadContext use the builder pattern</a>
      
    </li>
  
    <li>
      <a href="#use-renderassetusages-to-configure-gltf-meshes-materials-during-load">Use RenderAssetUsages to configure gLTF meshes &amp; materials during load</a>
      
    </li>
  
    <li>
      <a href="#consolidate-rendermaterials-and-similar-into-renderassets-implement-renderasset-for-destination-type">Consolidate RenderMaterials and similar into RenderAssets, implement RenderAsset for destination type</a>
      
    </li>
  
    <li>
      <a href="#fix-leftover-references-to-children-when-despawning-audio-entities">Fix leftover references to children when despawning audio entities</a>
      
    </li>
  
    <li>
      <a href="#move-wgsl-math-constants-and-color-operations-from-bevy-pbr-to-bevy-render">Move WGSL math constants and color operations from bevy_pbr to bevy_render</a>
      
    </li>
  
    <li>
      <a href="#overhaul-color">Overhaul Color</a>
      
        <ul>
          
          <li>
            <a href="#color-space-representation">Color space representation</a>
          </li>
          
          <li>
            <a href="#color-methods">Color methods</a>
          </li>
          
          <li>
            <a href="#alpha">Alpha</a>
          </li>
          
          <li>
            <a href="#css-constants">CSS Constants</a>
          </li>
          
          <li>
            <a href="#switch-to-linearrgba">Switch to LinearRgba</a>
          </li>
          
        </ul>
      
    </li>
  
    <li>
      <a href="#remove-old-color-space-utilities">Remove old color space utilities</a>
      
    </li>
  
    <li>
      <a href="#use-linearrgba-in-colorattachment">Use LinearRgba in ColorAttachment</a>
      
    </li>
  
    <li>
      <a href="#remove-close-on-esc">Remove close_on_esc</a>
      
    </li>
  
    <li>
      <a href="#make-sysinfo-diagnostic-plugin-optional">Make sysinfo diagnostic plugin optional</a>
      
    </li>
  
    <li>
      <a href="#improve-tracing-layer-customization">Improve tracing layer customization</a>
      
    </li>
  
    <li>
      <a href="#immediately-apply-deferred-system-params-in-system-run">Immediately apply deferred system params in System::run</a>
      
    </li>
  
    <li>
      <a href="#move-command-and-commandqueue-into-bevy-ecs-world">Move Command and CommandQueue into bevy::ecs::world</a>
      
    </li>
  
    <li>
      <a href="#make-component-storage-a-constant">Make Component::Storage a constant</a>
      
    </li>
  
    <li>
      <a href="#clean-up-type-registrations">Clean up type registrations</a>
      
    </li>
  
    <li>
      <a href="#don-t-store-access-archetypecomponentid-within-querystate">Don&#x27;t store Access&lt;ArchetypeComponentId&gt; within QueryState</a>
      
    </li>
  
    <li>
      <a href="#remove-worldcell">Remove WorldCell</a>
      
    </li>
  
    <li>
      <a href="#return-iterator-instead-of-slice-for-querystate-matched-tables-and-querystate-matches-archtypes">Return iterator instead of slice for QueryState::matched_tables and QueryState::matches_archtypes</a>
      
    </li>
  
    <li>
      <a href="#remove-system-stepping-from-default-features">Remove system stepping from default features</a>
      
    </li>
  
    <li>
      <a href="#optimize-event-updates-and-virtual-time">Optimize event updates and virtual time</a>
      
    </li>
  
    <li>
      <a href="#make-systemparam-new-archetype-and-querystate-new-archetype-unsafe">Make SystemParam::new_archetype and QueryState::new_archetype unsafe</a>
      
    </li>
  
    <li>
      <a href="#better-systemid-and-entity-conversion">Better SystemId and Entity conversion</a>
      
    </li>
  
    <li>
      <a href="#make-nextstate-an-enum">Make NextState an enum</a>
      
    </li>
  
    <li>
      <a href="#separate-states-from-core-ecs">Separate states from core ECS</a>
      
    </li>
  
    <li>
      <a href="#constrain-worldquery-get-state-to-only-accept-components">Constrain WorldQuery::get_state() to only accept Components</a>
      
    </li>
  
    <li>
      <a href="#unify-state-transition-names-to-exited-and-entered">Unify state transition names to exited and entered</a>
      
    </li>
  
    <li>
      <a href="#make-apply-state-transition-private">Make apply_state_transition private</a>
      
    </li>
  
    <li>
      <a href="#replace-fromworld-requirement-on-reflectresource-and-reflect-resource-for-state-s">Replace FromWorld requirement on ReflectResource and reflect Resource for State&lt;S&gt;</a>
      
    </li>
  
    <li>
      <a href="#make-some-reflectcomponent-reflectbundle-methods-work-with-entitymut-too">Make some ReflectComponent&#x2F;ReflectBundle methods work with EntityMut too</a>
      
    </li>
  
    <li>
      <a href="#make-from-reflect-or-world-also-try-reflectdefault-and-improve-some-comments-and-panic-messages">Make from_reflect_or_world also try ReflectDefault and improve some comments and panic messages</a>
      
    </li>
  
    <li>
      <a href="#generalize-component-reflection-to-operate-on-filteredentityref-and-filteredentitymut-not-entityref-and-entitymut">Generalize component reflection to operate on FilteredEntityRef and FilteredEntityMut, not EntityRef and EntityMut.</a>
      
    </li>
  
    <li>
      <a href="#multi-threaded-feature-rename">multi_threaded feature rename</a>
      
    </li>
  
    <li>
      <a href="#moves-intern-and-label-modules-into-bevy-ecs">Moves intern and label modules into bevy_ecs</a>
      
    </li>
  
    <li>
      <a href="#implement-the-animationgraph-allowing-for-multiple-animations-to-be-blended-together">Implement the AnimationGraph, allowing for multiple animations to be blended together.</a>
      
    </li>
  
    <li>
      <a href="#gizmo-line-joints">Gizmo line joints</a>
      
    </li>
  
    <li>
      <a href="#gizmo-line-styles">Gizmo line styles</a>
      
    </li>
  
    <li>
      <a href="#inconsistent-segments-resolution-naming">Inconsistent segments&#x2F;resolution naming</a>
      
    </li>
  
    <li>
      <a href="#make-gizmos-take-primitives-by-ref">Make gizmos take primitives by ref</a>
      
    </li>
  
    <li>
      <a href="#more-gizmos-builders">More gizmos builders</a>
      
    </li>
  
    <li>
      <a href="#rename-touchpad-to-gesture-and-add-new-gestures">rename touchpad to gesture, and add new gestures</a>
      
    </li>
  
    <li>
      <a href="#deprecate-receivedcharacter">Deprecate ReceivedCharacter</a>
      
    </li>
  
    <li>
      <a href="#flush-key-input-cache-when-bevy-loses-focus-adopted">flush key_input cache when Bevy loses focus (Adopted)</a>
      
    </li>
  
    <li>
      <a href="#add-direction3da-and-move-direction-types-out-of-primitives">Add Direction3dA and move direction types out of primitives</a>
      
    </li>
  
    <li>
      <a href="#rename-direction2d-3d-to-dir2-3">Rename Direction2d&#x2F;3d to Dir2&#x2F;3</a>
      
    </li>
  
    <li>
      <a href="#make-cardinal-splines-include-endpoints">Make cardinal splines include endpoints</a>
      
    </li>
  
    <li>
      <a href="#move-point-out-of-cubic-splines-module-and-expand-it">Move Point out of cubic splines module and expand it</a>
      
    </li>
  
    <li>
      <a href="#remove-vectorspace-impl-on-quat">Remove VectorSpace impl on Quat</a>
      
    </li>
  
    <li>
      <a href="#meshing-for-triangle3d-primitive">Meshing for Triangle3d primitive</a>
      
    </li>
  
    <li>
      <a href="#use-vec3a-for-3d-bounding-volumes-and-raycasts">Use Vec3A for 3D bounding volumes and raycasts</a>
      
    </li>
  
    <li>
      <a href="#update-glam-version-requirement-from-0-25-to-0-27">Update glam version requirement from 0.25 to 0.27</a>
      
    </li>
  
    <li>
      <a href="#common-meshbuilder-trait">Common MeshBuilder trait</a>
      
    </li>
  
    <li>
      <a href="#additional-options-to-mesh-primitives">Additional options to mesh primitives</a>
      
    </li>
  
    <li>
      <a href="#add-subdivisions-to-planemeshbuilder">Add subdivisions to PlaneMeshBuilder</a>
      
    </li>
  
    <li>
      <a href="#make-transform-rotate-axis-and-transform-rotate-local-axis-use-dir3">Make Transform::rotate_axis and Transform::rotate_local_axis use Dir3</a>
      
    </li>
  
    <li>
      <a href="#use-dir3-for-local-axis-methods-in-globaltransform">Use Dir3 for local axis methods in GlobalTransform</a>
      
    </li>
  
    <li>
      <a href="#fix-ord-and-partialord-differing-for-floatord-and-optimize-implementation">Fix Ord and PartialOrd differing for FloatOrd and optimize implementation</a>
      
    </li>
  
    <li>
      <a href="#move-floatord-into-bevy-math">Move FloatOrd into bevy_math</a>
      
    </li>
  
    <li>
      <a href="#reflect-treat-proxy-types-correctly-when-serializing">reflect: treat proxy types correctly when serializing</a>
      
    </li>
  
    <li>
      <a href="#bevy-reflect-recursive-registration">bevy_reflect: Recursive registration</a>
      
    </li>
  
    <li>
      <a href="#bevy-reflect-rename-untypedreflectdeserializer-to-reflectdeserializer">bevy_reflect: Rename UntypedReflectDeserializer to ReflectDeserializer</a>
      
    </li>
  
    <li>
      <a href="#implement-reflect-for-result-t-e-as-enum">Implement Reflect for Result&lt;T, E&gt; as enum</a>
      
    </li>
  
    <li>
      <a href="#fix-typeregistry-use-in-dynamic-scene">Fix TypeRegistry use in dynamic scene</a>
      
    </li>
  
    <li>
      <a href="#rename-camera3dbundle-s-dither-field-to-deband-dither-to-align-with-camera2dbundle">rename Camera3dBundle&#x27;s &#x27;dither&#x27; field to &#x27;deband_dither&#x27; to align with Camera2dBundle</a>
      
    </li>
  
    <li>
      <a href="#add-support-for-khr-texture-transform">Add support for KHR_texture_transform</a>
      
    </li>
  
    <li>
      <a href="#move-alphamode-into-bevy-render">Move AlphaMode into bevy_render</a>
      
    </li>
  
    <li>
      <a href="#prefer-uvec2-when-working-with-texture-dimensions">Prefer UVec2 when working with texture dimensions</a>
      
    </li>
  
    <li>
      <a href="#fix-cameraprojectionplugin-not-implementing-plugin-in-some-cases">Fix CameraProjectionPlugin not implementing Plugin in some cases</a>
      
    </li>
  
    <li>
      <a href="#add-random-shader-utils-fix-cluster-debug-visualization">Add random shader utils, fix cluster_debug_visualization</a>
      
    </li>
  
    <li>
      <a href="#intern-mesh-vertex-buffer-layouts-so-that-we-don-t-have-to-compare-them-over-and-over">Intern mesh vertex buffer layouts so that we don&#x27;t have to compare them over and over.</a>
      
    </li>
  
    <li>
      <a href="#batching-replace-gpuarraybufferindex-index-with-a-u32">Batching: replace GpuArrayBufferIndex::index with a u32</a>
      
    </li>
  
    <li>
      <a href="#solve-some-oklaba-inconsistencies">Solve some oklaba inconsistencies</a>
      
    </li>
  
    <li>
      <a href="#add-setting-to-enable-disable-shadows-to-materialplugin">Add setting to enable&#x2F;disable shadows to MaterialPlugin</a>
      
    </li>
  
    <li>
      <a href="#implement-maths-and-animatable-for-srgba">Implement maths and Animatable for Srgba</a>
      
    </li>
  
    <li>
      <a href="#remove-needless-color-specializaion-for-spritepipeline">Remove needless color specializaion for SpritePipeline</a>
      
    </li>
  
    <li>
      <a href="#improve-performance-by-binning-together-opaque-items-instead-of-sorting-them">Improve performance by binning together opaque items instead of sorting them.</a>
      
    </li>
  
    <li>
      <a href="#remove-deterministicrenderingconfig">remove DeterministicRenderingConfig</a>
      
    </li>
  
    <li>
      <a href="#micro-optimize-queue-material-meshes-primarily-to-remove-bit-manipulation">Micro-optimize queue_material_meshes, primarily to remove bit manipulation.</a>
      
    </li>
  
    <li>
      <a href="#disable-ray-query-and-ray-tracing-acceleration-structure-by-default">Disable RAY_QUERY and RAY_TRACING_ACCELERATION_STRUCTURE by default</a>
      
    </li>
  
    <li>
      <a href="#add-previous-view-uniforms-inverse-view">Add previous_view_uniforms.inverse_view</a>
      
    </li>
  
    <li>
      <a href="#generate-meshuniforms-on-the-gpu-via-compute-shader-where-available">Generate MeshUniforms on the GPU via compute shader where available.</a>
      
    </li>
  
    <li>
      <a href="#flipping-texture-coords-methods-has-been-added-to-the-standardmaterial">flipping texture coords methods has been added to the StandardMaterial</a>
      
    </li>
  
    <li>
      <a href="#implement-percentage-closer-filtering-pcf-for-point-lights">Implement percentage-closer filtering (PCF) for point lights.</a>
      
    </li>
  
    <li>
      <a href="#divide-the-single-visibleentities-list-into-separate-lists-for-2d-meshes-3d-meshes-lights-and-ui-elements-for-performance">Divide the single VisibleEntities list into separate lists for 2D meshes, 3D meshes, lights, and UI elements, for performance.</a>
      
    </li>
  
    <li>
      <a href="#fix-rendering-of-sprites-text-and-meshlets-after-12582">Fix rendering of sprites, text, and meshlets after #12582.</a>
      
    </li>
  
    <li>
      <a href="#expose-desired-maximum-frame-latency-through-window-creation">Expose desired_maximum_frame_latency through window creation</a>
      
    </li>
  
    <li>
      <a href="#fix-cameraprojection-panic-and-improve-cameraprojectionplugin">Fix CameraProjection panic and improve CameraProjectionPlugin</a>
      
    </li>
  
    <li>
      <a href="#implement-filmic-color-grading">Implement filmic color grading.</a>
      
    </li>
  
    <li>
      <a href="#add-buffervec-an-higher-performance-alternative-to-storagebuffer-and-make-gpuarraybuffer-use-it">Add BufferVec, an higher-performance alternative to StorageBuffer, and make GpuArrayBuffer use it.</a>
      
    </li>
  
    <li>
      <a href="#implement-clearcoat-per-the-filament-and-the-khr-materials-clearcoat-specifications">Implement clearcoat per the Filament and the KHR_materials_clearcoat specifications.</a>
      
    </li>
  
    <li>
      <a href="#clean-up-2d-render-phases">Clean up 2d render phases</a>
      
    </li>
  
    <li>
      <a href="#12502-remove-limit-on-renderlayers">#12502 Remove limit on RenderLayers.</a>
      
    </li>
  
    <li>
      <a href="#add-emissive-exposure-weight-to-the-standardmaterial">Add emissive_exposure_weight to the StandardMaterial</a>
      
    </li>
  
    <li>
      <a href="#make-render-phases-render-world-resources-instead-of-components">Make render phases render world resources instead of components.</a>
      
    </li>
  
    <li>
      <a href="#more-idiomatic-texture-atlas-builder">More idiomatic texture atlas builder</a>
      
    </li>
  
    <li>
      <a href="#move-clustering-related-types-and-functions-into-their-own-module">Move clustering-related types and functions into their own module.</a>
      
    </li>
  
    <li>
      <a href="#normalise-matrix-naming">Normalise matrix naming</a>
      
    </li>
  
    <li>
      <a href="#rename-point-light-to-clusterable-object-in-cluster-contexts">Rename &quot;point light&quot; to &quot;clusterable object&quot; in cluster contexts.</a>
      
    </li>
  
    <li>
      <a href="#deprecate-spritesheetbundle-and-atlasimagebundle">Deprecate SpriteSheetBundle and AtlasImageBundle</a>
      
    </li>
  
    <li>
      <a href="#decouple-backgroundcolor-from-uiimage">Decouple BackgroundColor from UiImage</a>
      
    </li>
  
    <li>
      <a href="#fix-ui-elements-randomly-not-appearing-after-13277">Fix UI elements randomly not appearing after #13277.</a>
      
    </li>
  
    <li>
      <a href="#fix12527-changes-to-make-serde-optional-for-bevy-color">FIX12527: Changes to make serde optional for bevy_color</a>
      
    </li>
  
    <li>
      <a href="#configure-surface-needs-to-be-on-the-main-thread-on-ios">configure_surface needs to be on the main thread on iOS</a>
      
    </li>
  
    <li>
      <a href="#introduce-a-windowwrapper-to-extend-the-lifetime-of-the-window-when-using-pipelined-rendering">Introduce a WindowWrapper to extend the lifetime of the window when using pipelined rendering</a>
      
    </li>
  
    <li>
      <a href="#add-an-index-argument-to-parallel-iteration-helpers-in-bevy-tasks">Add an index argument to parallel iteration helpers in bevy_tasks</a>
      
    </li>
  
    <li>
      <a href="#restore-pre-0-13-1-root-node-layout-behavior">Restore pre 0.13.1 Root Node Layout behavior</a>
      
    </li>
  
    <li>
      <a href="#rename-rect-inset-method-to-inflate">Rename Rect inset() method to inflate()</a>
      
    </li>
  
    <li>
      <a href="#updates-default-text-font-size-to-24px">Updates default Text font size to 24px</a>
      
    </li>
  
    <li>
      <a href="#disentangle-bevy-utils-bevy-core-s-reexported-dependencies">Disentangle bevy_utils&#x2F;bevy_core&#x27;s reexported dependencies</a>
      
    </li>
  
    <li>
      <a href="#fix-fit-canvas-to-parent">Fix fit_canvas_to_parent</a>
      
    </li>
  
    <li>
      <a href="#clean-up-winitwindows-remove-window">Clean up WinitWindows::remove_window</a>
      
    </li>
  
    <li>
      <a href="#ensure-clean-exit">Ensure clean exit</a>
      
    </li>
  
    <li>
      <a href="#fix-upgrade-to-winit-v0-30">fix: upgrade to winit v0.30</a>
      
    </li>
  
  </ul>
</nav>

      
    </div>
  </li>

        
      
        
          
  
  
  
  
  
  
  
  <li class="tree-menu__item">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;0-12-to-0-13&#x2F;">0.12 to 0.13</a>
      
    </div>
  </li>

        
      
        
          
  
  
  
  
  
  
  
  <li class="tree-menu__item">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;0-11-to-0-12&#x2F;">0.11 to 0.12</a>
      
    </div>
  </li>

        
      
        
          
  
  
  
  
  
  
  
  <li class="tree-menu__item">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;0-10-to-0-11&#x2F;">0.10 to 0.11</a>
      
    </div>
  </li>

        
      
        
          
  
  
  
  
  
  
  
  <li class="tree-menu__item">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;0-9-to-0-10&#x2F;">0.9 to 0.10</a>
      
    </div>
  </li>

        
      
        
          
  
  
  
  
  
  
  
  <li class="tree-menu__item">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;0-8-to-0-9&#x2F;">0.8 to 0.9</a>
      
    </div>
  </li>

        
      
        
          
  
  
  
  
  
  
  
  <li class="tree-menu__item">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;0-7-to-0-8&#x2F;">0.7 to 0.8</a>
      
    </div>
  </li>

        
      
        
          
  
  
  
  
  
  
  
  <li class="tree-menu__item">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;0-6-to-0-7&#x2F;">0.6 to 0.7</a>
      
    </div>
  </li>

        
      
        
          
  
  
  
  
  
  
  
  <li class="tree-menu__item">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;0-5-to-0-6&#x2F;">0.5 to 0.6</a>
      
    </div>
  </li>

        
      
        
          
  
  
  
  
  
  
  
  <li class="tree-menu__item">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;0-4-to-0-5&#x2F;">0.4 to 0.5</a>
      
    </div>
  </li>

        
      
    
  </ul>


              </div>
              <ul class="main-menu__menu">
                
  
  
  
    
  
  
  
  
  
  <li class="main-menu__entry main-menu__entry--getting-started">
    <a href="&#x2F;learn&#x2F;quick-start&#x2F;getting-started" class="main-menu__link">
      <span>Getting Started</span>
    </a>
  </li>

                
  
  
  
    
  
  
  
  
  
    
  
  <li class="main-menu__entry ">
    <a href="&#x2F;learn" class="main-menu__link main-menu__link--active">
      <span>Learn</span>
    </a>
  </li>

                
  
  
  
    
  
  
  
  
  
  <li class="main-menu__entry ">
    <a href="&#x2F;news" class="main-menu__link">
      <span>News</span>
    </a>
  </li>

                
  
  
  
    
  
  
  
  
  
  <li class="main-menu__entry ">
    <a href="&#x2F;community" class="main-menu__link">
      <span>Community</span>
    </a>
  </li>

                
  
  
  
    
  
  
  
  
  
  <li class="main-menu__entry ">
    <a href="&#x2F;foundation" class="main-menu__link">
      <span>Foundation</span>
    </a>
  </li>

                
  
  
  
    
  
  
  
  
  
  <li class="main-menu__entry ">
    <a href="&#x2F;assets" class="main-menu__link">
      <span>Assets</span>
    </a>
  </li>

                
  
  
  
    
  
  
  
  
  
  <li class="main-menu__entry ">
    <a href="&#x2F;examples" class="main-menu__link">
      <span>Examples</span>
    </a>
  </li>

                
              </ul>
            </div>
          </nav>
          <div class="header__cta-container">
            <a class="button button--pink header__cta" href="/donate">Donate
              <img class="button__icon"
                    src="/assets/heart.svg"
                    alt="heart icon"
                    width="512"
                    height="512" />
            </a>
            <a class="header__cta header__cta--github"
                href="https://github.com/bevyengine/bevy">
              <img src="/assets/github-mark-white.svg"
                    alt="GitHub repo"
                    width="98"
                    height="96" />
            </a>
          </div>
        </div>
      </header>
      <main class="layout__content">
        <div class="container">
          
            
  
    
    
    
      <h1 class="warning draft-header">Draft Page</h1>
      <div>
        The page is still under development (Tracking Issue: <a href="https://github.com/bevyengine/bevy-website/issues/1188">1188</a>). This page and all pages under it will be hidden from search engines and menus!
      </div>
    
  

          
          
  <div class="page-with-menu ">
    <div class="page-with-menu__menu-wrapper print:hidden">
      <div class="page-with-menu__menu">
        
  
  <ul class="tree-menu">
    
    
    
    
    
      
        
          
  
  
  
  
  
  
  
  <li class="tree-menu__item">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;introduction&#x2F;">Introduction</a>
      
    </div>
  </li>

        
      
        
          
  
  
  
  
  
  
    
  
  
    
    
      
    
  
  <li class="tree-menu__item tree-menu__item--active public_draft active_draft">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;0-13-to-0-14&#x2F;">0.13 to 0.14</a>
      
        
<nav aria-label="On This Page" class="on-this-page tree-menu__toc">
  
  <ul>
  
    <li>
      <a href="#fix-node2d-typo">Fix Node2d typo</a>
      
    </li>
  
    <li>
      <a href="#update-to-fixedbitset-0-5">Update to fixedbitset 0.5</a>
      
    </li>
  
    <li>
      <a href="#move-wasm-panic-handler-from-logplugin-to-panichandlerplugin">Move WASM panic handler from LogPlugin to PanicHandlerPlugin</a>
      
    </li>
  
    <li>
      <a href="#animationclip-now-uses-uuids-and-nooptypeidhash-is-now-noophash">AnimationClip now uses UUIDs and NoOpTypeIdHash is now NoOpHash</a>
      
    </li>
  
    <li>
      <a href="#multiplying-linearrgba-by-f32-no-longer-ignores-alpha-channel">Multiplying LinearRgba by f32 no longer ignores alpha channel</a>
      
    </li>
  
    <li>
      <a href="#separate-subapp-from-app">Separate SubApp from App</a>
      
        <ul>
          
          <li>
            <a href="#constructing-a-subapp">Constructing a SubApp</a>
          </li>
          
          <li>
            <a href="#app-changes">App changes</a>
          </li>
          
          <li>
            <a href="#3rd-party-traits-on-app">3rd-party traits on App</a>
          </li>
          
        </ul>
      
    </li>
  
    <li>
      <a href="#make-appexit-more-specific-about-exit-reason">Make AppExit more specific about exit reason</a>
      
    </li>
  
    <li>
      <a href="#deprecate-dynamic-plugins">Deprecate dynamic plugins</a>
      
    </li>
  
    <li>
      <a href="#move-state-initialization-methods-to-bevy-state">Move state initialization methods to bevy::state</a>
      
    </li>
  
    <li>
      <a href="#remove-the-updateassets-and-assetevents-schedules">Remove the UpdateAssets and AssetEvents schedules</a>
      
    </li>
  
    <li>
      <a href="#use-async-fn-in-traits-rather-than-boxedfuture">Use async fn in traits rather than BoxedFuture</a>
      
    </li>
  
    <li>
      <a href="#add-ignore-variant-to-processresult">Add Ignore variant to ProcessResult</a>
      
    </li>
  
    <li>
      <a href="#removed-into-assedid-t-for-handle-t">Removed Into&lt;AssedId&lt;T&gt;&gt; for Handle&lt;T&gt;</a>
      
    </li>
  
    <li>
      <a href="#add-asyncseek-trait-to-reader-to-be-able-to-seek-inside-asset-loaders">Add AsyncSeek trait to Reader to be able to seek inside asset loaders</a>
      
    </li>
  
    <li>
      <a href="#add-error-info-to-loadstate-failed">Add error info to LoadState::Failed</a>
      
    </li>
  
    <li>
      <a href="#make-assetmetacheck-a-field-of-assetplugin">Make AssetMetaCheck a field of AssetPlugin</a>
      
    </li>
  
    <li>
      <a href="#make-loadcontext-use-the-builder-pattern">Make LoadContext use the builder pattern</a>
      
    </li>
  
    <li>
      <a href="#use-renderassetusages-to-configure-gltf-meshes-materials-during-load">Use RenderAssetUsages to configure gLTF meshes &amp; materials during load</a>
      
    </li>
  
    <li>
      <a href="#consolidate-rendermaterials-and-similar-into-renderassets-implement-renderasset-for-destination-type">Consolidate RenderMaterials and similar into RenderAssets, implement RenderAsset for destination type</a>
      
    </li>
  
    <li>
      <a href="#fix-leftover-references-to-children-when-despawning-audio-entities">Fix leftover references to children when despawning audio entities</a>
      
    </li>
  
    <li>
      <a href="#move-wgsl-math-constants-and-color-operations-from-bevy-pbr-to-bevy-render">Move WGSL math constants and color operations from bevy_pbr to bevy_render</a>
      
    </li>
  
    <li>
      <a href="#overhaul-color">Overhaul Color</a>
      
        <ul>
          
          <li>
            <a href="#color-space-representation">Color space representation</a>
          </li>
          
          <li>
            <a href="#color-methods">Color methods</a>
          </li>
          
          <li>
            <a href="#alpha">Alpha</a>
          </li>
          
          <li>
            <a href="#css-constants">CSS Constants</a>
          </li>
          
          <li>
            <a href="#switch-to-linearrgba">Switch to LinearRgba</a>
          </li>
          
        </ul>
      
    </li>
  
    <li>
      <a href="#remove-old-color-space-utilities">Remove old color space utilities</a>
      
    </li>
  
    <li>
      <a href="#use-linearrgba-in-colorattachment">Use LinearRgba in ColorAttachment</a>
      
    </li>
  
    <li>
      <a href="#remove-close-on-esc">Remove close_on_esc</a>
      
    </li>
  
    <li>
      <a href="#make-sysinfo-diagnostic-plugin-optional">Make sysinfo diagnostic plugin optional</a>
      
    </li>
  
    <li>
      <a href="#improve-tracing-layer-customization">Improve tracing layer customization</a>
      
    </li>
  
    <li>
      <a href="#immediately-apply-deferred-system-params-in-system-run">Immediately apply deferred system params in System::run</a>
      
    </li>
  
    <li>
      <a href="#move-command-and-commandqueue-into-bevy-ecs-world">Move Command and CommandQueue into bevy::ecs::world</a>
      
    </li>
  
    <li>
      <a href="#make-component-storage-a-constant">Make Component::Storage a constant</a>
      
    </li>
  
    <li>
      <a href="#clean-up-type-registrations">Clean up type registrations</a>
      
    </li>
  
    <li>
      <a href="#don-t-store-access-archetypecomponentid-within-querystate">Don&#x27;t store Access&lt;ArchetypeComponentId&gt; within QueryState</a>
      
    </li>
  
    <li>
      <a href="#remove-worldcell">Remove WorldCell</a>
      
    </li>
  
    <li>
      <a href="#return-iterator-instead-of-slice-for-querystate-matched-tables-and-querystate-matches-archtypes">Return iterator instead of slice for QueryState::matched_tables and QueryState::matches_archtypes</a>
      
    </li>
  
    <li>
      <a href="#remove-system-stepping-from-default-features">Remove system stepping from default features</a>
      
    </li>
  
    <li>
      <a href="#optimize-event-updates-and-virtual-time">Optimize event updates and virtual time</a>
      
    </li>
  
    <li>
      <a href="#make-systemparam-new-archetype-and-querystate-new-archetype-unsafe">Make SystemParam::new_archetype and QueryState::new_archetype unsafe</a>
      
    </li>
  
    <li>
      <a href="#better-systemid-and-entity-conversion">Better SystemId and Entity conversion</a>
      
    </li>
  
    <li>
      <a href="#make-nextstate-an-enum">Make NextState an enum</a>
      
    </li>
  
    <li>
      <a href="#separate-states-from-core-ecs">Separate states from core ECS</a>
      
    </li>
  
    <li>
      <a href="#constrain-worldquery-get-state-to-only-accept-components">Constrain WorldQuery::get_state() to only accept Components</a>
      
    </li>
  
    <li>
      <a href="#unify-state-transition-names-to-exited-and-entered">Unify state transition names to exited and entered</a>
      
    </li>
  
    <li>
      <a href="#make-apply-state-transition-private">Make apply_state_transition private</a>
      
    </li>
  
    <li>
      <a href="#replace-fromworld-requirement-on-reflectresource-and-reflect-resource-for-state-s">Replace FromWorld requirement on ReflectResource and reflect Resource for State&lt;S&gt;</a>
      
    </li>
  
    <li>
      <a href="#make-some-reflectcomponent-reflectbundle-methods-work-with-entitymut-too">Make some ReflectComponent&#x2F;ReflectBundle methods work with EntityMut too</a>
      
    </li>
  
    <li>
      <a href="#make-from-reflect-or-world-also-try-reflectdefault-and-improve-some-comments-and-panic-messages">Make from_reflect_or_world also try ReflectDefault and improve some comments and panic messages</a>
      
    </li>
  
    <li>
      <a href="#generalize-component-reflection-to-operate-on-filteredentityref-and-filteredentitymut-not-entityref-and-entitymut">Generalize component reflection to operate on FilteredEntityRef and FilteredEntityMut, not EntityRef and EntityMut.</a>
      
    </li>
  
    <li>
      <a href="#multi-threaded-feature-rename">multi_threaded feature rename</a>
      
    </li>
  
    <li>
      <a href="#moves-intern-and-label-modules-into-bevy-ecs">Moves intern and label modules into bevy_ecs</a>
      
    </li>
  
    <li>
      <a href="#implement-the-animationgraph-allowing-for-multiple-animations-to-be-blended-together">Implement the AnimationGraph, allowing for multiple animations to be blended together.</a>
      
    </li>
  
    <li>
      <a href="#gizmo-line-joints">Gizmo line joints</a>
      
    </li>
  
    <li>
      <a href="#gizmo-line-styles">Gizmo line styles</a>
      
    </li>
  
    <li>
      <a href="#inconsistent-segments-resolution-naming">Inconsistent segments&#x2F;resolution naming</a>
      
    </li>
  
    <li>
      <a href="#make-gizmos-take-primitives-by-ref">Make gizmos take primitives by ref</a>
      
    </li>
  
    <li>
      <a href="#more-gizmos-builders">More gizmos builders</a>
      
    </li>
  
    <li>
      <a href="#rename-touchpad-to-gesture-and-add-new-gestures">rename touchpad to gesture, and add new gestures</a>
      
    </li>
  
    <li>
      <a href="#deprecate-receivedcharacter">Deprecate ReceivedCharacter</a>
      
    </li>
  
    <li>
      <a href="#flush-key-input-cache-when-bevy-loses-focus-adopted">flush key_input cache when Bevy loses focus (Adopted)</a>
      
    </li>
  
    <li>
      <a href="#add-direction3da-and-move-direction-types-out-of-primitives">Add Direction3dA and move direction types out of primitives</a>
      
    </li>
  
    <li>
      <a href="#rename-direction2d-3d-to-dir2-3">Rename Direction2d&#x2F;3d to Dir2&#x2F;3</a>
      
    </li>
  
    <li>
      <a href="#make-cardinal-splines-include-endpoints">Make cardinal splines include endpoints</a>
      
    </li>
  
    <li>
      <a href="#move-point-out-of-cubic-splines-module-and-expand-it">Move Point out of cubic splines module and expand it</a>
      
    </li>
  
    <li>
      <a href="#remove-vectorspace-impl-on-quat">Remove VectorSpace impl on Quat</a>
      
    </li>
  
    <li>
      <a href="#meshing-for-triangle3d-primitive">Meshing for Triangle3d primitive</a>
      
    </li>
  
    <li>
      <a href="#use-vec3a-for-3d-bounding-volumes-and-raycasts">Use Vec3A for 3D bounding volumes and raycasts</a>
      
    </li>
  
    <li>
      <a href="#update-glam-version-requirement-from-0-25-to-0-27">Update glam version requirement from 0.25 to 0.27</a>
      
    </li>
  
    <li>
      <a href="#common-meshbuilder-trait">Common MeshBuilder trait</a>
      
    </li>
  
    <li>
      <a href="#additional-options-to-mesh-primitives">Additional options to mesh primitives</a>
      
    </li>
  
    <li>
      <a href="#add-subdivisions-to-planemeshbuilder">Add subdivisions to PlaneMeshBuilder</a>
      
    </li>
  
    <li>
      <a href="#make-transform-rotate-axis-and-transform-rotate-local-axis-use-dir3">Make Transform::rotate_axis and Transform::rotate_local_axis use Dir3</a>
      
    </li>
  
    <li>
      <a href="#use-dir3-for-local-axis-methods-in-globaltransform">Use Dir3 for local axis methods in GlobalTransform</a>
      
    </li>
  
    <li>
      <a href="#fix-ord-and-partialord-differing-for-floatord-and-optimize-implementation">Fix Ord and PartialOrd differing for FloatOrd and optimize implementation</a>
      
    </li>
  
    <li>
      <a href="#move-floatord-into-bevy-math">Move FloatOrd into bevy_math</a>
      
    </li>
  
    <li>
      <a href="#reflect-treat-proxy-types-correctly-when-serializing">reflect: treat proxy types correctly when serializing</a>
      
    </li>
  
    <li>
      <a href="#bevy-reflect-recursive-registration">bevy_reflect: Recursive registration</a>
      
    </li>
  
    <li>
      <a href="#bevy-reflect-rename-untypedreflectdeserializer-to-reflectdeserializer">bevy_reflect: Rename UntypedReflectDeserializer to ReflectDeserializer</a>
      
    </li>
  
    <li>
      <a href="#implement-reflect-for-result-t-e-as-enum">Implement Reflect for Result&lt;T, E&gt; as enum</a>
      
    </li>
  
    <li>
      <a href="#fix-typeregistry-use-in-dynamic-scene">Fix TypeRegistry use in dynamic scene</a>
      
    </li>
  
    <li>
      <a href="#rename-camera3dbundle-s-dither-field-to-deband-dither-to-align-with-camera2dbundle">rename Camera3dBundle&#x27;s &#x27;dither&#x27; field to &#x27;deband_dither&#x27; to align with Camera2dBundle</a>
      
    </li>
  
    <li>
      <a href="#add-support-for-khr-texture-transform">Add support for KHR_texture_transform</a>
      
    </li>
  
    <li>
      <a href="#move-alphamode-into-bevy-render">Move AlphaMode into bevy_render</a>
      
    </li>
  
    <li>
      <a href="#prefer-uvec2-when-working-with-texture-dimensions">Prefer UVec2 when working with texture dimensions</a>
      
    </li>
  
    <li>
      <a href="#fix-cameraprojectionplugin-not-implementing-plugin-in-some-cases">Fix CameraProjectionPlugin not implementing Plugin in some cases</a>
      
    </li>
  
    <li>
      <a href="#add-random-shader-utils-fix-cluster-debug-visualization">Add random shader utils, fix cluster_debug_visualization</a>
      
    </li>
  
    <li>
      <a href="#intern-mesh-vertex-buffer-layouts-so-that-we-don-t-have-to-compare-them-over-and-over">Intern mesh vertex buffer layouts so that we don&#x27;t have to compare them over and over.</a>
      
    </li>
  
    <li>
      <a href="#batching-replace-gpuarraybufferindex-index-with-a-u32">Batching: replace GpuArrayBufferIndex::index with a u32</a>
      
    </li>
  
    <li>
      <a href="#solve-some-oklaba-inconsistencies">Solve some oklaba inconsistencies</a>
      
    </li>
  
    <li>
      <a href="#add-setting-to-enable-disable-shadows-to-materialplugin">Add setting to enable&#x2F;disable shadows to MaterialPlugin</a>
      
    </li>
  
    <li>
      <a href="#implement-maths-and-animatable-for-srgba">Implement maths and Animatable for Srgba</a>
      
    </li>
  
    <li>
      <a href="#remove-needless-color-specializaion-for-spritepipeline">Remove needless color specializaion for SpritePipeline</a>
      
    </li>
  
    <li>
      <a href="#improve-performance-by-binning-together-opaque-items-instead-of-sorting-them">Improve performance by binning together opaque items instead of sorting them.</a>
      
    </li>
  
    <li>
      <a href="#remove-deterministicrenderingconfig">remove DeterministicRenderingConfig</a>
      
    </li>
  
    <li>
      <a href="#micro-optimize-queue-material-meshes-primarily-to-remove-bit-manipulation">Micro-optimize queue_material_meshes, primarily to remove bit manipulation.</a>
      
    </li>
  
    <li>
      <a href="#disable-ray-query-and-ray-tracing-acceleration-structure-by-default">Disable RAY_QUERY and RAY_TRACING_ACCELERATION_STRUCTURE by default</a>
      
    </li>
  
    <li>
      <a href="#add-previous-view-uniforms-inverse-view">Add previous_view_uniforms.inverse_view</a>
      
    </li>
  
    <li>
      <a href="#generate-meshuniforms-on-the-gpu-via-compute-shader-where-available">Generate MeshUniforms on the GPU via compute shader where available.</a>
      
    </li>
  
    <li>
      <a href="#flipping-texture-coords-methods-has-been-added-to-the-standardmaterial">flipping texture coords methods has been added to the StandardMaterial</a>
      
    </li>
  
    <li>
      <a href="#implement-percentage-closer-filtering-pcf-for-point-lights">Implement percentage-closer filtering (PCF) for point lights.</a>
      
    </li>
  
    <li>
      <a href="#divide-the-single-visibleentities-list-into-separate-lists-for-2d-meshes-3d-meshes-lights-and-ui-elements-for-performance">Divide the single VisibleEntities list into separate lists for 2D meshes, 3D meshes, lights, and UI elements, for performance.</a>
      
    </li>
  
    <li>
      <a href="#fix-rendering-of-sprites-text-and-meshlets-after-12582">Fix rendering of sprites, text, and meshlets after #12582.</a>
      
    </li>
  
    <li>
      <a href="#expose-desired-maximum-frame-latency-through-window-creation">Expose desired_maximum_frame_latency through window creation</a>
      
    </li>
  
    <li>
      <a href="#fix-cameraprojection-panic-and-improve-cameraprojectionplugin">Fix CameraProjection panic and improve CameraProjectionPlugin</a>
      
    </li>
  
    <li>
      <a href="#implement-filmic-color-grading">Implement filmic color grading.</a>
      
    </li>
  
    <li>
      <a href="#add-buffervec-an-higher-performance-alternative-to-storagebuffer-and-make-gpuarraybuffer-use-it">Add BufferVec, an higher-performance alternative to StorageBuffer, and make GpuArrayBuffer use it.</a>
      
    </li>
  
    <li>
      <a href="#implement-clearcoat-per-the-filament-and-the-khr-materials-clearcoat-specifications">Implement clearcoat per the Filament and the KHR_materials_clearcoat specifications.</a>
      
    </li>
  
    <li>
      <a href="#clean-up-2d-render-phases">Clean up 2d render phases</a>
      
    </li>
  
    <li>
      <a href="#12502-remove-limit-on-renderlayers">#12502 Remove limit on RenderLayers.</a>
      
    </li>
  
    <li>
      <a href="#add-emissive-exposure-weight-to-the-standardmaterial">Add emissive_exposure_weight to the StandardMaterial</a>
      
    </li>
  
    <li>
      <a href="#make-render-phases-render-world-resources-instead-of-components">Make render phases render world resources instead of components.</a>
      
    </li>
  
    <li>
      <a href="#more-idiomatic-texture-atlas-builder">More idiomatic texture atlas builder</a>
      
    </li>
  
    <li>
      <a href="#move-clustering-related-types-and-functions-into-their-own-module">Move clustering-related types and functions into their own module.</a>
      
    </li>
  
    <li>
      <a href="#normalise-matrix-naming">Normalise matrix naming</a>
      
    </li>
  
    <li>
      <a href="#rename-point-light-to-clusterable-object-in-cluster-contexts">Rename &quot;point light&quot; to &quot;clusterable object&quot; in cluster contexts.</a>
      
    </li>
  
    <li>
      <a href="#deprecate-spritesheetbundle-and-atlasimagebundle">Deprecate SpriteSheetBundle and AtlasImageBundle</a>
      
    </li>
  
    <li>
      <a href="#decouple-backgroundcolor-from-uiimage">Decouple BackgroundColor from UiImage</a>
      
    </li>
  
    <li>
      <a href="#fix-ui-elements-randomly-not-appearing-after-13277">Fix UI elements randomly not appearing after #13277.</a>
      
    </li>
  
    <li>
      <a href="#fix12527-changes-to-make-serde-optional-for-bevy-color">FIX12527: Changes to make serde optional for bevy_color</a>
      
    </li>
  
    <li>
      <a href="#configure-surface-needs-to-be-on-the-main-thread-on-ios">configure_surface needs to be on the main thread on iOS</a>
      
    </li>
  
    <li>
      <a href="#introduce-a-windowwrapper-to-extend-the-lifetime-of-the-window-when-using-pipelined-rendering">Introduce a WindowWrapper to extend the lifetime of the window when using pipelined rendering</a>
      
    </li>
  
    <li>
      <a href="#add-an-index-argument-to-parallel-iteration-helpers-in-bevy-tasks">Add an index argument to parallel iteration helpers in bevy_tasks</a>
      
    </li>
  
    <li>
      <a href="#restore-pre-0-13-1-root-node-layout-behavior">Restore pre 0.13.1 Root Node Layout behavior</a>
      
    </li>
  
    <li>
      <a href="#rename-rect-inset-method-to-inflate">Rename Rect inset() method to inflate()</a>
      
    </li>
  
    <li>
      <a href="#updates-default-text-font-size-to-24px">Updates default Text font size to 24px</a>
      
    </li>
  
    <li>
      <a href="#disentangle-bevy-utils-bevy-core-s-reexported-dependencies">Disentangle bevy_utils&#x2F;bevy_core&#x27;s reexported dependencies</a>
      
    </li>
  
    <li>
      <a href="#fix-fit-canvas-to-parent">Fix fit_canvas_to_parent</a>
      
    </li>
  
    <li>
      <a href="#clean-up-winitwindows-remove-window">Clean up WinitWindows::remove_window</a>
      
    </li>
  
    <li>
      <a href="#ensure-clean-exit">Ensure clean exit</a>
      
    </li>
  
    <li>
      <a href="#fix-upgrade-to-winit-v0-30">fix: upgrade to winit v0.30</a>
      
    </li>
  
  </ul>
</nav>

      
    </div>
  </li>

        
      
        
          
  
  
  
  
  
  
  
  <li class="tree-menu__item">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;0-12-to-0-13&#x2F;">0.12 to 0.13</a>
      
    </div>
  </li>

        
      
        
          
  
  
  
  
  
  
  
  <li class="tree-menu__item">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;0-11-to-0-12&#x2F;">0.11 to 0.12</a>
      
    </div>
  </li>

        
      
        
          
  
  
  
  
  
  
  
  <li class="tree-menu__item">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;0-10-to-0-11&#x2F;">0.10 to 0.11</a>
      
    </div>
  </li>

        
      
        
          
  
  
  
  
  
  
  
  <li class="tree-menu__item">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;0-9-to-0-10&#x2F;">0.9 to 0.10</a>
      
    </div>
  </li>

        
      
        
          
  
  
  
  
  
  
  
  <li class="tree-menu__item">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;0-8-to-0-9&#x2F;">0.8 to 0.9</a>
      
    </div>
  </li>

        
      
        
          
  
  
  
  
  
  
  
  <li class="tree-menu__item">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;0-7-to-0-8&#x2F;">0.7 to 0.8</a>
      
    </div>
  </li>

        
      
        
          
  
  
  
  
  
  
  
  <li class="tree-menu__item">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;0-6-to-0-7&#x2F;">0.6 to 0.7</a>
      
    </div>
  </li>

        
      
        
          
  
  
  
  
  
  
  
  <li class="tree-menu__item">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;0-5-to-0-6&#x2F;">0.5 to 0.6</a>
      
    </div>
  </li>

        
      
        
          
  
  
  
  
  
  
  
  <li class="tree-menu__item">
    <div class="tree-menu__label">
      <a class="tree-menu__link" href="&#x2F;learn&#x2F;migration-guides&#x2F;0-4-to-0-5&#x2F;">0.4 to 0.5</a>
      
    </div>
  </li>

        
      
    
  </ul>


      </div>
    </div>
    <div class="page-with-menu__content">
      
  <div class="docs-page">
    <div class="docs-content">
      

      
      
      
      
      
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      

      
        
      

      
      
      
      
      
        
        
        
        
        
        
      
        
        
        
        
          
          
        
        
        
          
          
          
      <h1>
        Migration Guide: 0.13 to 0.14
        
      </h1>
      <div class="media-content">
        <aside class="callout callout--warning">
  <p>Bevy relies heavily on improvements in the Rust language and compiler. As a result, the Minimum Supported Rust Version (MSRV) is "the latest stable release" of Rust.</p>
</aside>
<div class="migration-guide">
<h3 id="fix-node2d-typo"><a href="https://github.com/bevyengine/bevy/pull/12038">Fix <code>Node2d</code> typo</a>
<a class="anchor-link" href="#fix-node2d-typo">#</a>
</h3>
<div class="migration-guide-area-tags">
</div>
<p><code>Node2d::ConstrastAdaptiveSharpening</code> from <code>bevy::core_pipeline::core_2d::graph</code> has been renamed to fix a typo. It was originally <code>Constrast</code>, but is now <code>Contrast</code>.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-path z-rust">Node2D<span class="z-punctuation z-accessor z-rust">::</span></span>ConstrastAdaptiveSharpening
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-meta z-path z-rust">Node2D<span class="z-punctuation z-accessor z-rust">::</span></span>ContrastAdaptiveSharpening
</span></code></pre>
<h3 id="update-to-fixedbitset-0-5"><a href="https://github.com/bevyengine/bevy/pull/12512">Update to <code>fixedbitset</code> 0.5</a>
<a class="anchor-link" href="#update-to-fixedbitset-0-5">#</a>
</h3>
<div class="migration-guide-area-tags">
</div>
<p><code>Access::grow</code> from <code>bevy::ecs::query</code> has been removed. Many operations now automatically grow the capacity.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> access <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Access<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">access<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">grow</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">1</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Other operations...
</span></span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> access <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Access<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Other operations...
</span></span></code></pre>
<h3 id="move-wasm-panic-handler-from-logplugin-to-panichandlerplugin"><a href="https://github.com/bevyengine/bevy/pull/12557">Move WASM panic handler from <code>LogPlugin</code> to <code>PanicHandlerPlugin</code></a>
<a class="anchor-link" href="#move-wasm-panic-handler-from-logplugin-to-panichandlerplugin">#</a>
</h3>
<div class="migration-guide-area-tags">
</div>
<p><code>LogPlugin</code> used to silently override the panic handler on WASM targets. This functionality has now been split out into the new <code>PanicHandlerPlugin</code>, which was added to <code>DefaultPlugins</code>.</p>
<p>If you want nicer error messages on WASM but don't use <code>DefaultPlugins</code>, make sure to manually add <code>PanicHandlerPlugin</code> to the app.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_plugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>MinimalPlugins<span class="z-punctuation z-separator z-rust">,</span> PanicHandlerPlugin</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre>
<h3 id="animationclip-now-uses-uuids-and-nooptypeidhash-is-now-noophash"><a href="https://github.com/bevyengine/bevy/pull/11707"><code>AnimationClip</code> now uses UUIDs and <code>NoOpTypeIdHash</code> is now <code>NoOpHash</code></a>
<a class="anchor-link" href="#animationclip-now-uses-uuids-and-nooptypeidhash-is-now-noophash">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Animation</div>
</div>
<p><code>AnimationClip</code> now uses UUIDs instead of hierarchical paths based on the <code>Name</code> component to refer to bones. This has several consequences:</p>
<ul>
<li>A new component, <code>AnimationTarget</code>, should be placed on each bone that you wish to animate, in order to specify its UUID and the associated <code>AnimationPlayer</code>. The glTF loader automatically creates these components as necessary, so most uses of glTF rigs shouldnt need to change.</li>
<li>Moving a bone around the tree, or renaming it, no longer prevents an <code>AnimationPlayer</code> from affecting it.</li>
<li>Dynamically changing the <code>AnimationPlayer</code> component will likely require manual updating of the <code>AnimationTarget</code> components.</li>
</ul>
<p>Entities with <code>AnimationPlayer</code> components may now possess descendants that also have <code>AnimationPlayer</code> components. They may not, however, animate the same bones.</p>
<p>Furthermore, <code>NoOpTypeIdHash</code> and <code>NoOpTypeIdHasher</code> have been renamed to <code>NoOpHash</code> and <code>NoOpHasher</code>.</p>
<h3 id="multiplying-linearrgba-by-f32-no-longer-ignores-alpha-channel"><a href="https://github.com/bevyengine/bevy/pull/12575">Multiplying <code>LinearRgba</code> by <code>f32</code> no longer ignores alpha channel</a>
<a class="anchor-link" href="#multiplying-linearrgba-by-f32-no-longer-ignores-alpha-channel">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Animation</div>
<div class="migration-guide-area-tag">Color</div>
<div class="migration-guide-area-tag">Math</div>
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>It was previously possible to multiply and divide a <code>Color</code> by an <code>f32</code>, which is now removed. You must now operate on a specific color space, such as <code>LinearRgba</code>. Furthermore, these operations used to skip the alpha channel, but that is no longer the case.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> color <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Color<span class="z-punctuation z-accessor z-rust">::</span></span>RgbaLinear <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    red<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    green<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    blue<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    alpha<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span> <span class="z-keyword z-operator z-arithmetic z-rust">*</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">5</span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Alpha is preserved, ignoring the multiplier.
</span></span><span class="z-source z-rust"><span class="z-support z-macro z-rust">assert_eq!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>color<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">a</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> color <span class="z-keyword z-operator z-assignment z-rust">=</span> LinearRgba <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    red<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    green<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    blue<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    alpha<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span> <span class="z-keyword z-operator z-arithmetic z-rust">*</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">5</span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Alpha is included in multiplication.
</span></span><span class="z-source z-rust"><span class="z-support z-macro z-rust">assert_eq!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>color<span class="z-punctuation z-accessor z-dot z-rust">.</span>alpha<span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">5</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<p>If you need the alpha channel to remain untouched, consider creating your own helper method:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">legacy_div_f32</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">color</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-rust">mut</span> LinearRgba, <span class="z-variable z-parameter z-rust">scale</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">f32</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    color<span class="z-punctuation z-accessor z-dot z-rust">.</span>red <span class="z-keyword z-operator z-assignment z-rust">/=</span> scale<span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    color<span class="z-punctuation z-accessor z-dot z-rust">.</span>green <span class="z-keyword z-operator z-assignment z-rust">/=</span> scale<span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    color<span class="z-punctuation z-accessor z-dot z-rust">.</span>blue <span class="z-keyword z-operator z-assignment z-rust">/=</span> scale<span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> color <span class="z-keyword z-operator z-assignment z-rust">=</span> LinearRgba <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    red<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    green<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    blue<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    alpha<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-support z-function z-rust">legacy_div_f32</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&amp;</span><span class="z-storage z-modifier z-rust">mut</span> color<span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">2.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<p>If you are fine with the alpha changing, but need it to remain within the range of 0.0 to 1.0, consider clamping it:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> color <span class="z-keyword z-operator z-assignment z-rust">=</span> LinearRgba <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    red<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    green<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    blue<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    alpha<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span> <span class="z-keyword z-operator z-arithmetic z-rust">*</span> <span class="z-constant z-numeric z-float z-rust">10.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Force alpha to be within [0.0, 1.0].
</span></span><span class="z-source z-rust">color<span class="z-punctuation z-accessor z-dot z-rust">.</span>alpha <span class="z-keyword z-operator z-assignment z-rust">=</span> color<span class="z-punctuation z-accessor z-dot z-rust">.</span>alpha<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">clamp</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<!-- TODO: I want this to be a callout, but shortcodes don't work here. -->
<p>Note that in some cases, such as rendering sprites, the alpha is automatically clamped so you do not need to do it manually.</p>
<h3 id="separate-subapp-from-app"><a href="https://github.com/bevyengine/bevy/pull/9202">Separate <code>SubApp</code> from <code>App</code></a>
<a class="anchor-link" href="#separate-subapp-from-app">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">App</div>
</div>
<p><code>SubApp</code> has been separated from <code>App</code>, so there are a few larger changes involved when interacting with these types.</p>
<h4 id="constructing-a-subapp">Constructing a <code>SubApp</code>
<a class="anchor-link" href="#constructing-a-subapp">#</a>
</h4>
<p><code>SubApp</code> no longer contains an <code>App</code>, so you no longer are able to convert an <code>App</code> into a <code>SubApp</code>. Furthermore, the extraction function must now be set outside of the constructor.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">AppLabel<span class="z-punctuation z-separator z-rust">,</span> Clone<span class="z-punctuation z-separator z-rust">,</span> Copy<span class="z-punctuation z-separator z-rust">,</span> Hash<span class="z-punctuation z-separator z-rust">,</span> PartialEq<span class="z-punctuation z-separator z-rust">,</span> Eq<span class="z-punctuation z-separator z-rust">,</span> Debug</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">MySubApp</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> app <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> sub_app <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>empty<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust">sub_app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Main<span class="z-punctuation z-separator z-rust">,</span> <span class="z-keyword z-operator z-range z-rust">...</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">sub_app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">insert_resource</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-range z-rust">...</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust">app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">insert_sub_app</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>MySubApp<span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">SubApp<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>sub_app<span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">|</span></span></span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-variable z-parameter z-rust">main_world</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-variable z-parameter z-rust">sub_app</span><span class="z-punctuation z-section z-parameters z-end z-rust">|</span></span> </span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Extraction function.
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">AppLabel<span class="z-punctuation z-separator z-rust">,</span> Clone<span class="z-punctuation z-separator z-rust">,</span> Copy<span class="z-punctuation z-separator z-rust">,</span> Hash<span class="z-punctuation z-separator z-rust">,</span> PartialEq<span class="z-punctuation z-separator z-rust">,</span> Eq<span class="z-punctuation z-separator z-rust">,</span> Debug</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">MySubApp</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> app <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Use `SubApp::new()` instead of `App::new()`.
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> sub_app <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">SubApp<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Instead of setting the extraction function when you create the `SubApp`, you must set it
</span></span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> afterwards. If you do not set an extraction function, it will do nothing.
</span></span><span class="z-source z-rust">sub_app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">set_extract</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">|</span></span></span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-variable z-parameter z-rust">main_world</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-variable z-parameter z-rust">sub_world</span><span class="z-punctuation z-section z-parameters z-end z-rust">|</span></span> </span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Extraction function.
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> You can still add systems and resources like normal.
</span></span><span class="z-source z-rust">sub_app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Main<span class="z-punctuation z-separator z-rust">,</span> <span class="z-keyword z-operator z-range z-rust">...</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">sub_app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">insert_resource</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-range z-rust">...</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust">app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">insert_sub_app</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>MySubApp<span class="z-punctuation z-separator z-rust">,</span> sub_app</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h4 id="app-changes"><code>App</code> changes
<a class="anchor-link" href="#app-changes">#</a>
</h4>
<p><code>App</code> is not <code>Send</code> anymore, but <code>SubApp</code> still is.</p>
<p>Due to the separation of <code>App</code> and <code>SubApp</code>, a few other methods have been changed.</p>
<p>First, <code>App::world</code> as a property is no longer directly accessible. Instead use the getters <code>App::world</code> and <code>App::world_mut</code>.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Component</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">MyComponent</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> app <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span><span class="z-constant z-other z-placeholder z-rust">{:?}</span><span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-separator z-rust">,</span> app<span class="z-punctuation z-accessor z-dot z-rust">.</span>world<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">id</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">app<span class="z-punctuation z-accessor z-dot z-rust">.</span>world<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>MyComponent</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> app <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span><span class="z-constant z-other z-placeholder z-rust">{:?}</span><span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-separator z-rust">,</span> app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">world</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">id</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span> <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Notice the added paranthesese.
</span></span><span class="z-source z-rust">app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">world_mut</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>MyComponent</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<p>Secondly, all getters for the sub app now return a <code>SubApp</code> instead of an <code>App</code>. This includes <code>App::sub_app</code>, <code>App::sub_app_mut</code>, <code>App::get_sub_app</code>, and <code>App::get_sub_app_mut</code>.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">AppLabel<span class="z-punctuation z-separator z-rust">,</span> Clone<span class="z-punctuation z-separator z-rust">,</span> Copy<span class="z-punctuation z-separator z-rust">,</span> Hash<span class="z-punctuation z-separator z-rust">,</span> PartialEq<span class="z-punctuation z-separator z-rust">,</span> Eq<span class="z-punctuation z-separator z-rust">,</span> Debug</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">MySubApp</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> app <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">insert_sub_app</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>MySubApp<span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">SubApp<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-support z-macro z-rust">assert_eq!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">sub_app</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>MySubApp</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">type_id</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-path z-rust">TypeId<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">of<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>SubApp<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h4 id="3rd-party-traits-on-app">3rd-party traits on <code>App</code>
<a class="anchor-link" href="#3rd-party-traits-on-app">#</a>
</h4>
<p>If you implemented an extension trait on <code>App</code>, consider also implementing it on <code>SubApp</code>:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-meta z-trait z-rust"><span class="z-storage z-type z-trait z-rust">trait</span> <span class="z-entity z-name z-trait z-rust">SpawnBundle</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-trait z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-documentation z-rust"><span class="z-punctuation z-definition z-comment z-rust">///</span> Spawns a new `Bundle` into the `World`.
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-trait z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">spawn_bundle</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>T<span class="z-punctuation z-separator z-rust">:</span> Bundle<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">self</span>, <span class="z-variable z-parameter z-rust">bundle</span><span class="z-punctuation z-separator z-rust">:</span> T</span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-&gt;</span> <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-storage z-type z-rust">Self</span></span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-trait z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span> </span><span class="z-meta z-impl z-rust">SpawnBundle <span class="z-keyword z-other z-rust">for</span></span><span class="z-meta z-impl z-rust"> <span class="z-entity z-name z-impl z-rust">App</span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">spawn_bundle</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>T<span class="z-punctuation z-separator z-rust">:</span> Bundle<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">self</span>, <span class="z-variable z-parameter z-rust">bundle</span><span class="z-punctuation z-separator z-rust">:</span> T</span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-&gt;</span> <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-storage z-type z-rust">Self</span></span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-variable z-language z-rust">self</span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">world_mut</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>bundle</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-variable z-language z-rust">self</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-documentation z-rust"><span class="z-punctuation z-definition z-comment z-rust">///</span> `SubApp` has a very similar API to `App`, so the code will usually look the same.
</span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span> </span><span class="z-meta z-impl z-rust">SpawnBundle <span class="z-keyword z-other z-rust">for</span></span><span class="z-meta z-impl z-rust"> <span class="z-entity z-name z-impl z-rust">SubApp</span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">spawn_bundle</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>T<span class="z-punctuation z-separator z-rust">:</span> Bundle<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">self</span>, <span class="z-variable z-parameter z-rust">bundle</span><span class="z-punctuation z-separator z-rust">:</span> T</span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-&gt;</span> <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-storage z-type z-rust">Self</span></span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-variable z-language z-rust">self</span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">world_mut</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>bundle</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-variable z-language z-rust">self</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<h3 id="make-appexit-more-specific-about-exit-reason"><a href="https://github.com/bevyengine/bevy/pull/13022">Make <code>AppExit</code> more specific about exit reason</a>
<a class="anchor-link" href="#make-appexit-more-specific-about-exit-reason">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">App</div>
</div>
<p>The <code>AppExit</code> event is now an enum that represents whether the code exited successfully or not. If you construct it, you must now specify <code>Success</code> or <code>Error</code>:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">send_exit</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">writer</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">EventWriter<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>AppExit<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    writer<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">send</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>AppExit</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">send_exit</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">writer</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">EventWriter<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>AppExit<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    writer<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">send</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">AppExit<span class="z-punctuation z-accessor z-rust">::</span></span>Success</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Or...
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    writer<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">send</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">AppExit<span class="z-punctuation z-accessor z-rust">::</span></span>Error<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">NonZeroU8<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">1</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<p>If you subscribed to this event in a system, consider <code>match</code>ing whether it was a success or an error:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">handle_exit</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">reader</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">EventReader<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>AppExit<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> app_exit <span class="z-keyword z-operator z-rust">in</span> reader<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">read</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Something interesting here...
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">handle_exit</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">reader</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">EventReader<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>AppExit<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> app_exit <span class="z-keyword z-operator z-rust">in</span> reader<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">read</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-control z-rust">match</span> <span class="z-keyword z-operator z-arithmetic z-rust">*</span>app_exit <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            <span class="z-meta z-path z-rust">AppExit<span class="z-punctuation z-accessor z-rust">::</span></span>Success <span class="z-keyword z-operator z-rust">=&gt;</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Something interesting here...
</span></span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            <span class="z-meta z-path z-rust">AppExit<span class="z-punctuation z-accessor z-rust">::</span></span>Error<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>exit_code</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-rust">=&gt;</span> <span class="z-support z-macro z-rust">panic!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>App exiting with an error! (Code: {exit_code})<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<p>Furthermore, <code>App::run</code> now returns <code>AppExit</code> instead of the unit type <code>()</code>. Since <code>AppExit</code> implements <a href="https://doc.rust-lang.org/stable/std/process/trait.Termination.html"><code>Termination</code></a>, you can now return it from the main function.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">main</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">main</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-&gt;</span> AppExit</span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14 (alternative)
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">main</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> If you want to ignore `AppExit`, you can add a semicolon instead. :)
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<h3 id="deprecate-dynamic-plugins"><a href="https://github.com/bevyengine/bevy/pull/13080">Deprecate dynamic plugins</a>
<a class="anchor-link" href="#deprecate-dynamic-plugins">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">App</div>
</div>
<p>Dynamic plugins are now deprecated. If possible, remove all usage them from your code:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> This would be compiled into a separate dynamic library.
</span></span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">DynamicPlugin</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-modifier z-rust">pub</span> <span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">MyPlugin</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span> </span><span class="z-meta z-impl z-rust">Plugin <span class="z-keyword z-other z-rust">for</span></span><span class="z-meta z-impl z-rust"> <span class="z-entity z-name z-impl z-rust">MyPlugin</span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> This would be compiled into the main binary.
</span></span><span class="z-source z-rust"><span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load_plugin</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>path/to/plugin<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> This would now be compiled into the main binary as well.
</span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-modifier z-rust">pub</span> <span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">MyPlugin</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span> </span><span class="z-meta z-impl z-rust">Plugin <span class="z-keyword z-other z-rust">for</span></span><span class="z-meta z-impl z-rust"> <span class="z-entity z-name z-impl z-rust">MyPlugin</span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_plugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>MyPlugin</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre>
<p>If you are unable to do that, you may temporarily silence the deprecation warnings by annotating all usage with <code>#[allow(deprecated)]</code>. Please note that the current dynamic plugin system will be removed by the next major Bevy release, so you will have to migrate eventually. You may be interested in these safer, related links:</p>
<ul>
<li><a href="https://bevyengine.org/assets/#scripting">Bevy Assets - Scripting</a>: Scripting and modding libraries for Bevy</li>
<li><a href="https://bevyengine.org/assets/#development-tools">Bevy Assets - Development tools</a>: Hot reloading and other development functionality</li>
<li><a href="https://github.com/ZettaScaleLabs/stabby"><code>stabby</code></a>: Stable Rust ABI</li>
</ul>
<p>If you truly cannot go without dynamic plugins, you may copy the code from Bevy and add it to your project locally.</p>
<h3 id="move-state-initialization-methods-to-bevy-state"><a href="https://github.com/bevyengine/bevy/pull/13637">Move state initialization methods to <code>bevy::state</code></a>
<a class="anchor-link" href="#move-state-initialization-methods-to-bevy-state">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">App</div>
<div class="migration-guide-area-tag">ECS</div>
</div>
<p><code>State</code> has been moved to <code>bevy::state</code>. With it, <code>App::init_state</code> has been moved from a normal method to an extension trait. You may now need to import <code>AppExtStates</code> in order to use this method. (This trait is behind the <code>bevy_app</code> feature flag, which you may need to enable.)</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">init_state<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>MyState<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">bevy<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">state<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">app<span class="z-punctuation z-accessor z-rust">::</span></span>AppExtStates <span class="z-keyword z-operator z-rust">as</span> <span class="z-keyword z-operator z-rust">_</span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">init_state<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>MyState<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre>
<p>If you import the prelude (such as with <code>use bevy::prelude::*</code>), you do not need to do this.</p>
<h3 id="remove-the-updateassets-and-assetevents-schedules"><a href="https://github.com/bevyengine/bevy/pull/11986">Remove the <code>UpdateAssets</code> and <code>AssetEvents</code> schedules</a>
<a class="anchor-link" href="#remove-the-updateassets-and-assetevents-schedules">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Assets</div>
</div>
<p>The <code>UpdateAssets</code> schedule has been removed. If you add systems to this schedule, move them to run on <code>PreUpdate</code>. (You may need to configure the ordering with <code>system.before(...)</code> and <code>system.after(...)</code>.)</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_plugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>DefaultPlugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>UpdateAssets<span class="z-punctuation z-separator z-rust">,</span> my_system</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_plugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>DefaultPlugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>PreUpdate<span class="z-punctuation z-separator z-rust">,</span> my_system</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre>
<p>Furthermore, <code>AssetEvents</code> has been changed from a <code>ScheduleLabel</code> to a <code>SystemSet</code> within the <code>First</code> schedule.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_plugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>DefaultPlugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>AssetEvents<span class="z-punctuation z-separator z-rust">,</span> my_system</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_plugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>DefaultPlugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>First<span class="z-punctuation z-separator z-rust">,</span> my_system<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">in_set</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>AssetEvents</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre>
<h3 id="use-async-fn-in-traits-rather-than-boxedfuture"><a href="https://github.com/bevyengine/bevy/pull/12550">Use <code>async fn</code> in traits rather than <code>BoxedFuture</code></a>
<a class="anchor-link" href="#use-async-fn-in-traits-rather-than-boxedfuture">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Assets</div>
</div>
<p>In Rust 1.75, <a href="https://blog.rust-lang.org/2023/12/28/Rust-1.75.0.html#async-fn-and-return-position-impl-trait-in-traits"><code>async fn</code> was stabilized for traits</a>. Some traits have been switched from returning <code>BoxedFuture</code> to be an <code>async fn</code>, specifically:</p>
<ul>
<li><code>AssetReader</code></li>
<li><code>AssetWriter</code></li>
<li><code>AssetLoader</code></li>
<li><code>AssetSaver</code></li>
<li><code>Process</code></li>
</ul>
<p>Please update your trait implementations:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span> </span><span class="z-meta z-impl z-rust">AssetLoader <span class="z-keyword z-other z-rust">for</span></span><span class="z-meta z-impl z-rust"> <span class="z-entity z-name z-impl z-rust">MyAssetLoader</span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">load</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span><span class="z-storage z-modifier z-lifetime z-rust">&#39;a</span><span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">        <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-lifetime z-rust">&#39;a</span> <span class="z-variable z-parameter z-rust">self</span>,
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">        <span class="z-variable z-parameter z-rust">reader</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-lifetime z-rust">&#39;a</span> <span class="z-storage z-modifier z-rust">mut</span> Reader,
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">        <span class="z-variable z-parameter z-rust">_settings</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-lifetime z-rust">&#39;a</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>,
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">        <span class="z-variable z-parameter z-rust">_load_context</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-lifetime z-rust">&#39;a</span> <span class="z-storage z-modifier z-rust">mut</span> LoadContext,
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    </span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-&gt;</span> <span class="z-meta z-generic z-rust">BoxedFuture<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span><span class="z-storage z-modifier z-lifetime z-rust">&#39;a</span>, <span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Result</span><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span><span class="z-meta z-path z-rust"><span class="z-storage z-type z-rust"><span class="z-storage z-type z-rust">Self</span><span class="z-punctuation z-accessor z-rust">::</span></span></span>Asset, <span class="z-meta z-path z-rust"><span class="z-storage z-type z-rust"><span class="z-storage z-type z-rust">Self</span><span class="z-punctuation z-accessor z-rust">::</span></span></span>Error<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span></span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Note that you had to pin the future.
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-support z-type z-rust">Box</span><span class="z-meta z-path z-rust"><span class="z-punctuation z-accessor z-rust">::</span></span>pin<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>async <span class="z-storage z-modifier z-rust">move</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">            <span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> bytes <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-support z-type z-rust">Vec</span><span class="z-meta z-path z-rust"><span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">            reader<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">read_to_end</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&amp;</span><span class="z-storage z-modifier z-rust">mut</span> bytes</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span>await<span class="z-keyword z-operator z-rust">?</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">            <span class="z-support z-type z-rust">Ok</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>bytes</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span> </span><span class="z-meta z-impl z-rust">AssetLoader <span class="z-keyword z-other z-rust">for</span></span><span class="z-meta z-impl z-rust"> <span class="z-entity z-name z-impl z-rust">MyAssetLoader</span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    async <span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">load</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span><span class="z-storage z-modifier z-lifetime z-rust">&#39;a</span><span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">        <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-lifetime z-rust">&#39;a</span> <span class="z-variable z-parameter z-rust">self</span>,
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">        <span class="z-variable z-parameter z-rust">reader</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-lifetime z-rust">&#39;a</span> <span class="z-storage z-modifier z-rust">mut</span> <span class="z-meta z-generic z-rust">Reader<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>&#39;<span class="z-keyword z-operator z-rust">_</span><span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span>,
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">        <span class="z-variable z-parameter z-rust">_settings</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-lifetime z-rust">&#39;a</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>,
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">        <span class="z-variable z-parameter z-rust">_load_context</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-lifetime z-rust">&#39;a</span> <span class="z-storage z-modifier z-rust">mut</span> <span class="z-meta z-generic z-rust">LoadContext<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>&#39;<span class="z-keyword z-operator z-rust">_</span><span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span>,
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    </span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-&gt;</span> <span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Result</span><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span><span class="z-meta z-path z-rust"><span class="z-storage z-type z-rust"><span class="z-storage z-type z-rust">Self</span><span class="z-punctuation z-accessor z-rust">::</span></span></span>Asset, <span class="z-meta z-path z-rust"><span class="z-storage z-type z-rust"><span class="z-storage z-type z-rust">Self</span><span class="z-punctuation z-accessor z-rust">::</span></span></span>Error<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span></span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> No more need to pin the future, just write it!
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> bytes <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-support z-type z-rust">Vec</span><span class="z-meta z-path z-rust"><span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        reader<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">read_to_end</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&amp;</span><span class="z-storage z-modifier z-rust">mut</span> bytes</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span>await<span class="z-keyword z-operator z-rust">?</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">        <span class="z-support z-type z-rust">Ok</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>bytes</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<p>Because these traits now use <code>async</code>, they are no longer object safe. If you need to receive or store <code>&amp;dyn Trait</code>, use the <code>&amp;dyn ErasedTrait</code> variant instead. For instance:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">MyReader</span></span><span class="z-meta z-struct z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Box</span><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>dyn AssetReader<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">MyReader</span></span><span class="z-meta z-struct z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Box</span><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>dyn ErasedAssetReader<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="add-ignore-variant-to-processresult"><a href="https://github.com/bevyengine/bevy/pull/12605">Add <code>Ignore</code> variant to <code>ProcessResult</code></a>
<a class="anchor-link" href="#add-ignore-variant-to-processresult">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Assets</div>
</div>
<p>The <code>ProcessResult</code> enum, used in asset loading, has a new <code>Ignore</code> variant. You may need to update your <code>match</code> statements.</p>
<h3 id="removed-into-assedid-t-for-handle-t"><a href="https://github.com/bevyengine/bevy/pull/12655">Removed <code>Into&lt;AssedId&lt;T&gt;&gt;</code> for <code>Handle&lt;T&gt;</code></a>
<a class="anchor-link" href="#removed-into-assedid-t-for-handle-t">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Assets</div>
</div>
<p>Converting from a <code>Handle</code> to an <code>AssetId</code> using <code>Into</code> was removed because it was a footgun that could potentially drop the asset if the <code>Handle</code> was a strong reference. If you need the <code>AssetId</code>, please use <code>Handle::id()</code> instead.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> id<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">AssetId<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>T<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> handle<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">into</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> id <span class="z-keyword z-operator z-assignment z-rust">=</span> handle<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">id</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="add-asyncseek-trait-to-reader-to-be-able-to-seek-inside-asset-loaders"><a href="https://github.com/bevyengine/bevy/pull/12547">Add <code>AsyncSeek</code> trait to <code>Reader</code> to be able to seek inside asset loaders</a>
<a class="anchor-link" href="#add-asyncseek-trait-to-reader-to-be-able-to-seek-inside-asset-loaders">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Assets</div>
</div>
<p>The asset loader's <code>Reader</code> type alias now requires the new <code>AsyncSeek</code> trait. Please implement <code>AsyncSeek</code> for any structures that must be a <code>Reader</code>, or use an alternative if seeking is not supported.</p>
<h3 id="add-error-info-to-loadstate-failed"><a href="https://github.com/bevyengine/bevy/pull/12709">Add error info to <code>LoadState::Failed</code></a>
<a class="anchor-link" href="#add-error-info-to-loadstate-failed">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Assets</div>
</div>
<p>Rust prides itself on its error handling, and Bevy has been steadily catching up. Previously, when checking if an asset was loaded using <code>AssetServer::load_state</code> (and variants), the only information returned on an error was the empty <code>LoadState::Failed</code>. Not very useful for debugging!</p>
<p>Now, a full <code>AssetLoadError</code> is included inside <code>Failed</code> to tell you exactly what went wrong. You may need to update your <code>match</code> and <code>if let</code> statements to handle this new value:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-keyword z-control z-rust">match</span> asset_server<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load_state</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>asset_id</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-path z-rust">LoadState<span class="z-punctuation z-accessor z-rust">::</span></span>Failed <span class="z-keyword z-operator z-rust">=&gt;</span> <span class="z-support z-macro z-rust">eprintln!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>Could not load asset!<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-keyword z-control z-rust">match</span> asset_server<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load_state</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>asset_id</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-path z-rust">LoadState<span class="z-punctuation z-accessor z-rust">::</span></span>Failed<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>error</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-rust">=&gt;</span> <span class="z-support z-macro z-rust">eprintln!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>Could not load asset! Error: <span class="z-constant z-other z-placeholder z-rust">{}</span><span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-separator z-rust">,</span> error<span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></code></pre>
<p>Furthermore, the <code>Copy</code>, <code>PartialOrd</code>, and <code>Ord</code> implementations have been removed from <code>LoadState</code>. You can explicitly call <code>.clone()</code> instead of copying the enum, and you can manually re-implement <code>Ord</code> as a helper method if required.</p>
<h3 id="make-assetmetacheck-a-field-of-assetplugin"><a href="https://github.com/bevyengine/bevy/pull/13177">Make <code>AssetMetaCheck</code> a field of <code>AssetPlugin</code></a>
<a class="anchor-link" href="#make-assetmetacheck-a-field-of-assetplugin">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Assets</div>
</div>
<p><code>AssetMetaCheck</code> is used to configure how the <code>AssetPlugin</code> reads <code>.meta</code> files. It was previously a resource, but now has been changed to a field in <code>AssetPlugin</code>. If you use <code>DefaultPlugins</code>, you can use <code>.set</code> to configure this field.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_plugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>DefaultPlugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">insert_resource</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">AssetMetaCheck<span class="z-punctuation z-accessor z-rust">::</span></span>Never</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_plugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>DefaultPlugins<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">set</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>AssetPlugin <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        meta_check<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">AssetMetaCheck<span class="z-punctuation z-accessor z-rust">::</span></span>Never<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre>
<h3 id="make-loadcontext-use-the-builder-pattern"><a href="https://github.com/bevyengine/bevy/pull/13465">Make <code>LoadContext</code> use the builder pattern</a>
<a class="anchor-link" href="#make-loadcontext-use-the-builder-pattern">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Assets</div>
</div>
<!-- Note: This is the migration guide for both #13465 AND #13415. -->
<p><code>LoadContext</code>, used by <code>AssetLoader</code>, has been updated so all of its <code>load_*</code> methods have been merged into a builder struct.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust">load_context<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load_direct</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>path</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust">load_context<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">loader</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">direct</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">untyped</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>path</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust">load_context<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load_direct_with_reader</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>reader<span class="z-punctuation z-separator z-rust">,</span> path</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust">load_context<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">loader</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">direct</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">with_reader</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>reader</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">untyped</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>path</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust">load_context<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load_untyped</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>path</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust">load_context<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">loader</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">untyped</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>path</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust">load_context<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load_with_settings</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>path<span class="z-punctuation z-separator z-rust">,</span> settings</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust">load_context<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">loader</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">with_settings</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>settings</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>path</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="use-renderassetusages-to-configure-gltf-meshes-materials-during-load"><a href="https://github.com/bevyengine/bevy/pull/12302">Use <code>RenderAssetUsages</code> to configure gLTF meshes &amp; materials during load</a>
<a class="anchor-link" href="#use-renderassetusages-to-configure-gltf-meshes-materials-during-load">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Assets</div>
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>It is now possible configure whether meshes and materials should be loaded in the main world, the render world, or both with <code>GltfLoaderSettings</code>. The <code>load_meshes</code> field has been changed from a <code>bool</code> to a <code>RenderAssetUsages</code> bitflag, and a new <code>load_materials</code> field as been added.</p>
<p>You may need to update any gLTF <code>.meta</code> files:</p>
<!-- This is technically RON, but it follows a syntax similar to Rust so we use that instead for syntax highlighting. -->
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust">load_meshes<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-language z-rust">true</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust">load_meshes<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>MAIN_WORLD | RENDER_WORLD<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre>
<p>If you use <code>AssetServer::load_with_settings</code> instead when loading gLTF files, you will also have to update:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust">asset_server<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load_with_settings</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>model.gltf<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">|</span></span></span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-variable z-parameter z-rust">s</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-rust">mut</span> GltfLoaderSettings<span class="z-punctuation z-section z-parameters z-end z-rust">|</span></span> </span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">    s<span class="z-punctuation z-accessor z-dot z-rust">.</span>load_meshes <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-constant z-language z-rust">true</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust">asset_server<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">load_with_settings</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>model.gltf<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">|</span></span></span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-variable z-parameter z-rust">s</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-rust">mut</span> GltfLoaderSettings<span class="z-punctuation z-section z-parameters z-end z-rust">|</span></span> </span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust">    s<span class="z-punctuation z-accessor z-dot z-rust">.</span>load_meshes <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">RenderAssetUsages<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">MAIN_WORLD</span> <span class="z-keyword z-operator z-bitwise z-rust">|</span> <span class="z-meta z-path z-rust">RenderAssetUsages<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">RENDER_WORLD</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="consolidate-rendermaterials-and-similar-into-renderassets-implement-renderasset-for-destination-type"><a href="https://github.com/bevyengine/bevy/pull/12827">Consolidate <code>RenderMaterials</code> and similar into <code>RenderAssets</code>, implement <code>RenderAsset</code> for destination type</a>
<a class="anchor-link" href="#consolidate-rendermaterials-and-similar-into-renderassets-implement-renderasset-for-destination-type">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Assets</div>
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p><code>RenderMaterials</code>, <code>RenderMaterials2d</code>, and <code>RenderUiMaterials</code> have all been replaced with the <code>RenderAssets</code> resource. If you need access a <code>PreparedMaterial&lt;T&gt;</code> using an <code>AssetId</code>, use <code>RenderAssets::get</code> instead.</p>
<p>Furthermore, the <code>RenderAsset</code> trait should now be implemented for destination types rather than source types. If you need to access the source type, use the <code>RenderAsset::SourceAsset</code> associated type.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span> </span><span class="z-meta z-impl z-rust">RenderAsset <span class="z-keyword z-other z-rust">for</span></span><span class="z-meta z-impl z-rust"> <span class="z-entity z-name z-impl z-rust">Image</span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-type z-rust">type</span> <span class="z-entity z-name z-type z-rust">PreparedAsset</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> GpuImage<span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span> </span><span class="z-meta z-impl z-rust">RenderAsset <span class="z-keyword z-other z-rust">for</span></span><span class="z-meta z-impl z-rust"> <span class="z-entity z-name z-impl z-rust">GpuImage</span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-type z-rust">type</span> <span class="z-entity z-name z-type z-rust">SourceAsset</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> Image<span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<h3 id="fix-leftover-references-to-children-when-despawning-audio-entities"><a href="https://github.com/bevyengine/bevy/pull/12407">Fix leftover references to children when despawning audio entities</a>
<a class="anchor-link" href="#fix-leftover-references-to-children-when-despawning-audio-entities">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Audio</div>
</div>
<p>You can configure the behavior of spawned audio with the <code>PlaybackMode</code> enum. One of its variants, <code>PlaybackMode::Despawn</code>, would despawn the entity when the audio finished playing.</p>
<p>There was previously a bug where this would only despawn the entity and not its children. This has been fixed, so now <code>despawn_recursive()</code> is called when the audio finishes.</p>
<p>If you relied on this behavior, consider using <code>PlaybackMode::Remove</code> to just remove the audio components from the entity or <code>AudioSink::empty()</code> to check whether any audio is finished and manually <code>despawn()</code> it.</p>
<h3 id="move-wgsl-math-constants-and-color-operations-from-bevy-pbr-to-bevy-render"><a href="https://github.com/bevyengine/bevy/pull/13209">Move WGSL math constants and color operations from <code>bevy_pbr</code> to <code>bevy_render</code></a>
<a class="anchor-link" href="#move-wgsl-math-constants-and-color-operations-from-bevy-pbr-to-bevy-render">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Color</div>
</div>
<p>Mathematical constants and color conversion functions for shaders have been moved from <code>bevy_pbr::utils</code> to <code>bevy_render::maths</code> and <code>bevy_render::color_operations</code>. If you depended on these in your own shaders, please update your import statements:</p>
<pre data-lang="wgsl" class="language-wgsl z-code"><code class="language-wgsl" data-lang="wgsl"><span class="z-text z-plain">// 0.13
</span><span class="z-text z-plain">#import bevy_pbr::utils::{PI, rgb_to_hsv}
</span><span class="z-text z-plain">
</span><span class="z-text z-plain">// 0.14
</span><span class="z-text z-plain">#import bevy_render::{maths::PI, color_operations::rgb_to_hsv}
</span></code></pre>
<h3 id="overhaul-color"><a href="https://github.com/bevyengine/bevy/pull/12163">Overhaul <code>Color</code></a>
<a class="anchor-link" href="#overhaul-color">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Color</div>
<div class="migration-guide-area-tag">Gizmos</div>
<div class="migration-guide-area-tag">Rendering</div>
<div class="migration-guide-area-tag">Text</div>
<div class="migration-guide-area-tag">UI</div>
</div>
<p>Bevy's color support has received a major overhaul, and with it the new <code>bevy::color</code> module. Buckle up, many things have been changed!</p>
<h4 id="color-space-representation">Color space representation
<a class="anchor-link" href="#color-space-representation">#</a>
</h4>
<p>Bevy's main <code>Color</code> enum is used to represent color in many different color spaces (such as RGB, HSL, and more). Before, these color spaces were all represented inline as variants:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-storage z-type z-enum z-rust">enum</span> <span class="z-entity z-name z-enum z-rust">Color</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust">    Rgba <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        red<span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">f32</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        green<span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">f32</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        blue<span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">f32</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        alpha<span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">f32</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust">    Hsla <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        hue<span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">f32</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        saturation<span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">f32</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        lightness<span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">f32</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        alpha<span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">f32</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<p>This has been changed so now each color space has its own dedicated struct:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">Srgba</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">red</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-storage z-type z-rust">f32</span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">green</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-storage z-type z-rust">f32</span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">blue</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-storage z-type z-rust">f32</span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">alpha</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-storage z-type z-rust">f32</span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">Hsla</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">hue</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-storage z-type z-rust">f32</span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">saturation</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-storage z-type z-rust">f32</span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">lightness</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-storage z-type z-rust">f32</span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">alpha</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-storage z-type z-rust">f32</span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-storage z-type z-enum z-rust">enum</span> <span class="z-entity z-name z-enum z-rust">Color</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust">    Srgba<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Srgba</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust">    Hsla<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Hsla</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-enum z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<p>This makes it easier to organize and manage different color spaces, and many more color spaces have been added too! To handle this change, you may need to update your match statements:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-keyword z-control z-rust">match</span> color <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-path z-rust">Color<span class="z-punctuation z-accessor z-rust">::</span></span>Rgba <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> red<span class="z-punctuation z-separator z-rust">,</span> green<span class="z-punctuation z-separator z-rust">,</span> blue<span class="z-punctuation z-separator z-rust">,</span> alpha </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span> <span class="z-keyword z-operator z-rust">=&gt;</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Something cool here!
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-rust">_</span> <span class="z-keyword z-operator z-rust">=&gt;</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-keyword z-control z-rust">match</span> color <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-path z-rust">Color<span class="z-punctuation z-accessor z-rust">::</span></span>Srgba<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Srgba <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> red<span class="z-punctuation z-separator z-rust">,</span> green<span class="z-punctuation z-separator z-rust">,</span> blue<span class="z-punctuation z-separator z-rust">,</span> alpha </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-rust">=&gt;</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Something cool here!
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> If you explicitly match every possible color space, you may need to handle more variants.
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Color::Xyza(Xyza { x, y, z, alpha }) =&gt; {
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span>     // Something else even cooler here!
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> },
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-rust">_</span> <span class="z-keyword z-operator z-rust">=&gt;</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></code></pre>
<p>Additionally, you must now use the <code>From</code> and <code>Into</code> implementations when converting between color spaces, as compared to the old helper methods such as <code>as_rgba</code> and <code>as_hsla</code>.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> color <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Color<span class="z-punctuation z-accessor z-rust">::</span></span>rgb<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">as_hsla</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> color<span class="z-punctuation z-separator z-rust">:</span> Hsla <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Srgba<span class="z-punctuation z-accessor z-rust">::</span></span>rgb<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">into</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h4 id="color-methods"><code>Color</code> methods
<a class="anchor-link" href="#color-methods">#</a>
</h4>
<p>Any mention of RGB has been renamed to <a href="https://en.wikipedia.org/wiki/SRGB">sRGB</a>. This includes the variant <code>Color::Rgba</code> turning into <code>Color::Srgba</code> as well as methods such as <code>Color::rgb</code> and <code>Color::rgb_u8</code> turning into <code>Color::srgb</code> and <code>Color::srgb_u8</code>.</p>
<p>Methods to access specific channels of <code>Color</code> have been removed due to causing silent, relatively expensive conversions. This includes <code>Color::r</code>, <code>Color::set_r</code>, <code>Color::with_r</code>, and all of the equivalents for <code>g</code>, <code>b</code> <code>h</code>, <code>s</code> and <code>l</code>. Convert your <code>Color</code> into the desired color space, perform your operation there, and then convert it back.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> color <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Color<span class="z-punctuation z-accessor z-rust">::</span></span>rgb<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">color<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">set_b</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> color <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Color<span class="z-punctuation z-accessor z-rust">::</span></span>srgb<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> srgba <span class="z-keyword z-operator z-assignment z-rust">=</span> Srgba <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    blue<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-meta z-path z-rust">Srgba<span class="z-punctuation z-accessor z-rust">::</span></span>from<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>color</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> color <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Color<span class="z-punctuation z-accessor z-rust">::</span></span>from<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>srgba</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<p><code>Color::hex</code> has been moved to <code>Srgba::hex</code>. Call <code>.into()</code> or construct a <code>Color::Srgba</code> variant manually to convert it.</p>
<p><code>Color::rgb_linear</code> and <code>Color::rgba_linear</code> have been renamed <code>Color::linear_rgb</code> and <code>Color::linear_rgba</code> to fit the naming scheme of the <code>LinearRgba</code> struct.</p>
<p><code>Color::as_linear_rgba_f32</code> and <code>Color::as_linear_rgba_u32</code> have been removed. Call <code>LinearRgba::to_f32_array</code> and <code>LinearRgba::to_u32</code> instead, converting if necessary.</p>
<p>Several other color conversion methods to transform LCH or HSL colors into float arrays or <code>Vec</code> types have been removed. Please reimplement these externally or open a PR to re-add them if you found them particularly useful.</p>
<p>Vector field arithmetic operations on <code>Color</code> (add, subtract, multiply and divide by a f32) have been removed. Instead, convert your colors into <code>LinearRgba</code> space and perform your operations explicitly there. This is particularly relevant when working with emissive or HDR colors, whose color channel values are routinely outside of the ordinary 0 to 1 range.</p>
<h4 id="alpha">Alpha
<a class="anchor-link" href="#alpha">#</a>
</h4>
<p>Alpha, also known as transparency, used to be referred to by the letter <code>a</code>. It is now called by its full name within structs and methods.</p>
<ul>
<li><code>Color::set_a</code>, <code>Color::with_a</code>, and <code>Color::a</code> are now <code>Color::set_alpha</code>, <code>Color::with_alpha</code>, and <code>Color::alpha</code>. These are part of the new <code>Alpha</code> trait.</li>
<li>Additionally, <code>Color::is_fully_transparent</code> is now part of the <code>Alpha</code>.</li>
</ul>
<h4 id="css-constants">CSS Constants
<a class="anchor-link" href="#css-constants">#</a>
</h4>
<p>The various CSS color constants are no longer stored directly on <code>Color</code>. Instead, theyre defined in the <code>Srgba</code> color space, and accessed via <code>bevy::color::palettes</code>. Call <code>.into()</code> on them to convert them into a <code>Color</code> for quick debugging use.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> color <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Color<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">BLUE</span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">bevy<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">color<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">palettes<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">css<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-constant z-other z-rust">BLUE</span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> color <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-constant z-other z-rust">BLUE</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<p>Please note that <code>palettes::css</code> is not necessarily 1:1 with the constants defined previously as some names and colors have been changed to conform with the CSS spec. If you need the same color as before, consult the table below or use the color values from the <a href="https://github.com/bevyengine/bevy/blob/v0.13.2/crates/bevy_render/src/color/mod.rs#L60">old constants</a>.</p>
<table><thead><tr><th>0.13</th><th>0.14</th></tr></thead><tbody>
<tr><td><code>CYAN</code></td><td><code>AQUA</code></td></tr>
<tr><td><code>DARK_GRAY</code></td><td><code>Srgba::gray(0.25)</code></td></tr>
<tr><td><code>DARK_GREEN</code></td><td><code>Srgba::rgb(0.0, 0.5, 0.0)</code></td></tr>
<tr><td><code>GREEN</code></td><td><code>LIME</code></td></tr>
<tr><td><code>LIME_GREEN</code></td><td><code>LIMEGREEN</code></td></tr>
<tr><td><code>PINK</code></td><td><code>DEEP_PINK</code></td></tr>
</tbody></table>
<h4 id="switch-to-linearrgba">Switch to <code>LinearRgba</code>
<a class="anchor-link" href="#switch-to-linearrgba">#</a>
</h4>
<p><code>WireframeMaterial</code>, <code>ExtractedUiNode</code>, <code>ExtractedDirectionalLight</code>, <code>ExtractedPointLight</code>, <code>ExtractedSpotLight</code>, and <code>ExtractedSprite</code> now store a <code>LinearRgba</code> rather than a polymorphic <code>Color</code>. Furthermore, <code>Color</code> no longer implements <code>AsBindGroup</code>. You should store a <code>LinearRgba</code> instead to avoid conversion costs.</p>
<h3 id="remove-old-color-space-utilities"><a href="https://github.com/bevyengine/bevy/pull/12105">Remove old color space utilities</a>
<a class="anchor-link" href="#remove-old-color-space-utilities">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Color</div>
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>The <code>SrgbColorSpace</code> trait, <code>HslRepresentation</code> struct, and <code>LchRepresentation</code> struct have been removed in favor of the specific color space structs.</p>
<p>For <code>SrgbColorSpace</code>, use <code>Srgba::gamma_function()</code> and <code>Srgba::gamma_function_inverse()</code>. If you used the <code>SrgbColorSpace</code> implementation for <code>u8</code>, convert it to an <code>f32</code> first:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 14 is random, this could be any number.
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> nonlinear<span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">u8</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">14</span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Apply gamma function, converting `u8` to `f32`.
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> linear<span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">f32</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Srgba<span class="z-punctuation z-accessor z-rust">::</span></span>gamma_function<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>nonlinear <span class="z-keyword z-operator z-rust">as</span> <span class="z-storage z-type z-rust">f32</span> <span class="z-keyword z-operator z-arithmetic z-rust">/</span> <span class="z-constant z-numeric z-float z-rust">255.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Convert back to a `u8`.
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> linear<span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">u8</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>linear <span class="z-keyword z-operator z-arithmetic z-rust">*</span> <span class="z-constant z-numeric z-float z-rust">255.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-rust">as</span> <span class="z-storage z-type z-rust">u8</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<p>Note that this conversion can be costly, especially if called during the <code>Update</code> schedule. Consider just using <code>f32</code> instead.</p>
<p><code>HslRepresentation</code> and <code>LchRepresentation</code> can be replaced with the <code>From</code> implementations between <code>Srgba</code>, <code>Hsla</code>, and <code>Lcha</code>.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> srgb <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">HslRepresentation<span class="z-punctuation z-accessor z-rust">::</span></span>hsl_to_nonlinear_srgb<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">330.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">7</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">8</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> lch <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">LchRepresentation<span class="z-punctuation z-accessor z-rust">::</span></span>nonlinear_srgb_to_lch<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">94</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">66</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">8</span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> srgba<span class="z-punctuation z-separator z-rust">:</span> Srgba <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Hsla<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">330.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">7</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">8</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">into</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> lcha<span class="z-punctuation z-separator z-rust">:</span> Lcha <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Srgba<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">94</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">66</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">8</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">into</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="use-linearrgba-in-colorattachment"><a href="https://github.com/bevyengine/bevy/pull/12116">Use <code>LinearRgba</code> in <code>ColorAttachment</code></a>
<a class="anchor-link" href="#use-linearrgba-in-colorattachment">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Color</div>
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p><code>ColorAttachment::new()</code> now takes <code>Option&lt;LinearRgba&gt;</code> instead of <code>Option&lt;Color&gt;</code> for the <code>clear_color</code>. You can use the <code>From&lt;Color&gt;</code> implementation to convert your color.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> clear_color<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Option</span><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>LinearRgba<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-support z-type z-rust">Some</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>color<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">into</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="remove-close-on-esc"><a href="https://github.com/bevyengine/bevy/pull/12859">Remove <code>close_on_esc</code></a>
<a class="anchor-link" href="#remove-close-on-esc">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Dev-Tools</div>
</div>
<p>The <code>close_on_esc</code> system was removed because it was too opiniated and lacked customization. If you used this system, you may copy its contents below:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-modifier z-rust">pub</span> <span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">close_on_esc</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">commands</span><span class="z-punctuation z-separator z-rust">:</span> Commands,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-variable z-parameter z-rust">focused_windows</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span>Entity, <span class="z-keyword z-operator z-rust">&amp;</span>Window<span class="z-punctuation z-section z-group z-end z-rust">)</span><span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-variable z-parameter z-rust">input</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Res<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span><span class="z-meta z-generic z-rust">ButtonInput<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>KeyCode<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>window<span class="z-punctuation z-separator z-rust">,</span> focus</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-rust">in</span> focused_windows<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">iter</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-control z-rust">if</span> <span class="z-keyword z-operator z-logical z-rust">!</span>focus<span class="z-punctuation z-accessor z-dot z-rust">.</span>focused <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            <span class="z-keyword z-control z-rust">continue</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-control z-rust">if</span> input<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">just_pressed</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">KeyCode<span class="z-punctuation z-accessor z-rust">::</span></span>Escape</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">entity</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>window</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">despawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<p>You may be interested in using the built-in keybinds provided by the operating system instead, such as <kbd>Alt+F4</kbd> and <kbd>Command+Q</kbd>.</p>
<h3 id="make-sysinfo-diagnostic-plugin-optional"><a href="https://github.com/bevyengine/bevy/pull/12164">Make <code>sysinfo</code> diagnostic plugin optional</a>
<a class="anchor-link" href="#make-sysinfo-diagnostic-plugin-optional">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Diagnostics</div>
</div>
<p><code>bevy::diagnostic</code> depends on the <code>sysinfo</code> to track CPU and memory usage using <code>SystemInformationDiagnosticsPlugin</code>, but compiling and polling system information can be very slow. <code>sysinfo</code> is now behind the <code>sysinfo_plugin</code> feature flag, which is enabled by default for <code>bevy</code> for <em>not</em> for <code>bevy_diagnostic</code>.</p>
<p>If you depend on <code>bevy_diagnostic</code> directly, toggle the flag in <code>Cargo.toml</code>:</p>
<pre data-lang="toml" class="language-toml z-code"><code class="language-toml" data-lang="toml"><span class="z-source z-toml"><span class="z-punctuation z-definition z-table z-begin z-toml">[</span><span class="z-meta z-tag z-table z-toml"><span class="z-entity z-name z-table z-toml">dependencies</span></span><span class="z-punctuation z-definition z-table z-end z-toml">]</span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">bevy_diagnostic</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-punctuation z-definition z-inline-table z-begin z-toml">{</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">version</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">&quot;</span>0.14<span class="z-punctuation z-definition z-string z-end z-toml">&quot;</span></span><span class="z-punctuation z-separator z-inline-table z-toml">,</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">features</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-punctuation z-definition z-array z-begin z-toml">[</span><span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">&quot;</span>sysinfo_plugin<span class="z-punctuation z-definition z-string z-end z-toml">&quot;</span></span><span class="z-punctuation z-definition z-array z-end z-toml">]</span> <span class="z-punctuation z-definition z-inline-table z-end z-toml">}</span>
</span></code></pre>
<p>If you set <code>default-features = false</code> for <code>bevy</code>, do the same in <code>Cargo.toml</code>:</p>
<pre data-lang="toml" class="language-toml z-code"><code class="language-toml" data-lang="toml"><span class="z-source z-toml"><span class="z-punctuation z-definition z-table z-begin z-toml">[</span><span class="z-meta z-tag z-table z-toml"><span class="z-entity z-name z-table z-toml">dependencies</span></span><span class="z-punctuation z-definition z-table z-end z-toml">]</span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">bevy</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-punctuation z-definition z-inline-table z-begin z-toml">{</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">version</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">&quot;</span>0.14<span class="z-punctuation z-definition z-string z-end z-toml">&quot;</span></span><span class="z-punctuation z-separator z-inline-table z-toml">,</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">default-features</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-constant z-language z-toml">false</span><span class="z-punctuation z-separator z-inline-table z-toml">,</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">features</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-punctuation z-definition z-array z-begin z-toml">[</span><span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">&quot;</span>sysinfo_plugin<span class="z-punctuation z-definition z-string z-end z-toml">&quot;</span></span><span class="z-punctuation z-definition z-array z-end z-toml">]</span> <span class="z-punctuation z-definition z-inline-table z-end z-toml">}</span>
</span></code></pre>
<h3 id="improve-tracing-layer-customization"><a href="https://github.com/bevyengine/bevy/pull/13159">Improve <code>tracing</code> layer customization</a>
<a class="anchor-link" href="#improve-tracing-layer-customization">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Diagnostics</div>
</div>
<p>Bevy uses <code>tracing</code> to handle logging and spans through <code>LogPlugin</code>. This could be customized with the <code>update_subscriber</code> field, but it was highly restrictive. This has since been amended, replacing the <code>update_subscriber</code> field with the more flexible <code>custom_layer</code>, which returns a <code>Layer</code>.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">update_subscriber</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">_app</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-rust">mut</span> App, <span class="z-variable z-parameter z-rust">subscriber</span><span class="z-punctuation z-separator z-rust">:</span> BoxedSubscriber</span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-&gt;</span> BoxedSubscriber</span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-support z-type z-rust">Box</span><span class="z-meta z-path z-rust"><span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>subscriber<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">with</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>CustomLayer</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_plugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>LogPlugin <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        update_subscriber<span class="z-punctuation z-separator z-rust">:</span> <span class="z-support z-type z-rust">Some</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>update_subscriber</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">bevy<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">log<span class="z-punctuation z-accessor z-rust">::</span></span>tracing_subscriber<span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">custom_layer</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">_app</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-rust">mut</span> App</span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-&gt;</span> <span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Option</span><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>BoxedLayer<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span></span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> You can provide a single layer:
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">return</span> <span class="z-support z-type z-rust">Some</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>CustomLayer<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">boxed</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Or you can provide multiple layers, since `Vec&lt;Layer&gt;` also implements `Layer`:
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-support z-type z-rust">Some</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-support z-type z-rust">Box</span><span class="z-meta z-path z-rust"><span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-support z-macro z-rust">vec!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        <span class="z-meta z-path z-rust">tracing_subscriber<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">fmt<span class="z-punctuation z-accessor z-rust">::</span></span>layer<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">            <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">with_file</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-language z-rust">true</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">            <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">boxed</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">        CustomLayer<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">boxed</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    <span class="z-punctuation z-section z-group z-end z-rust">]</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_plugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>LogPlugin <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        custom_layer<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<p>The <code>BoxedSubscriber</code> type alias has also been removed, it was replaced by the <code>BoxedLayer</code> type alias.</p>
<h3 id="immediately-apply-deferred-system-params-in-system-run"><a href="https://github.com/bevyengine/bevy/pull/11823">Immediately apply deferred system params in <code>System::run</code></a>
<a class="anchor-link" href="#immediately-apply-deferred-system-params-in-system-run">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
</div>
<p>The default implementation of <code>System::run</code> will now always immediately run <code>System::apply_deferred</code>. If you were manually calling <code>System::apply_deferred</code> in this situation, you may remove it. Please note that <code>System::run_unsafe</code> still <em>does not</em> call <code>apply_deferred</code> because it cannot guarantee it will be safe.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust">system<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>world</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Sometime later:
</span></span><span class="z-source z-rust">system<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">apply_deferred</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>world</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust">system<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>world</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> `apply_deferred` no longer needs to be called!
</span></span></code></pre>
<h3 id="move-command-and-commandqueue-into-bevy-ecs-world"><a href="https://github.com/bevyengine/bevy/pull/12234">Move <code>Command</code> and <code>CommandQueue</code> into <code>bevy::ecs::world</code></a>
<a class="anchor-link" href="#move-command-and-commandqueue-into-bevy-ecs-world">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
</div>
<p><code>Command</code> and <code>CommandQueue</code> have been moved from <code>bevy::ecs::system</code> to <code>bevy::ecs::world</code>. If you import them directly, you will need to update your import statements.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">bevy<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">ecs<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">system<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>Command<span class="z-punctuation z-separator z-rust">,</span> CommandQueue</span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">bevy<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">ecs<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">world<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>Command<span class="z-punctuation z-separator z-rust">,</span> CommandQueue</span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="make-component-storage-a-constant"><a href="https://github.com/bevyengine/bevy/pull/12311">Make <code>Component::Storage</code> a constant</a>
<a class="anchor-link" href="#make-component-storage-a-constant">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
</div>
<p>The <code>Component::Storage</code> associated type has been replaced with the associated constant <code>STORAGE_TYPE</code>, making the <code>ComponentStorage</code> trait unnecessary. If you were manually implementing <code>Component</code> instead of using the derive macro, update your definitions:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span> </span><span class="z-meta z-impl z-rust">Component <span class="z-keyword z-other z-rust">for</span></span><span class="z-meta z-impl z-rust"> <span class="z-entity z-name z-impl z-rust">MyComponent</span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-type z-rust">type</span> <span class="z-entity z-name z-type z-rust">Storage</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> TableStorage<span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span> </span><span class="z-meta z-impl z-rust">Component <span class="z-keyword z-other z-rust">for</span></span><span class="z-meta z-impl z-rust"> <span class="z-entity z-name z-impl z-rust">MyComponent</span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">const</span> <span class="z-constant z-other z-rust">STORAGE_TYPE</span><span class="z-punctuation z-separator z-rust">:</span> StorageType <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">StorageType<span class="z-punctuation z-accessor z-rust">::</span></span>Table<span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">
</span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<table><thead><tr><th>Before</th><th>After</th></tr></thead><tbody>
<tr><td><code>TableStorage</code></td><td><code>StorageType::Table</code></td></tr>
<tr><td><code>SparseStorage</code></td><td><code>StorageType::SparseSet</code></td></tr>
</tbody></table>
<p><code>Component</code> is also now no longer object safe. If you were using <code>dyn Component</code>, please consider <a href="https://github.com/bevyengine/bevy/issues">filing an issue</a> describing your use-case.</p>
<h3 id="clean-up-type-registrations"><a href="https://github.com/bevyengine/bevy/pull/12314">Clean up type registrations</a>
<a class="anchor-link" href="#clean-up-type-registrations">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
<div class="migration-guide-area-tag">Reflection</div>
</div>
<p>External types are no longer registered into the type registry automatically unless they are used by other Bevy types (due to the new recursive registration). If you were depending on types from <code>std</code>, <code>glam</code>, or similar types being in the type registry you may need to manually register them.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">register_type<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>DMat3<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="don-t-store-access-archetypecomponentid-within-querystate"><a href="https://github.com/bevyengine/bevy/pull/12474">Don't store <code>Access&lt;ArchetypeComponentId&gt;</code> within <code>QueryState</code></a>
<a class="anchor-link" href="#don-t-store-access-archetypecomponentid-within-querystate">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
</div>
<p><code>QueryState</code> no longer stores an <code>Access&lt;ArchetypeComponentId&gt;</code>, you must now pass it as an argument to each method that uses it. To account for this change:</p>
<ul>
<li><code>QueryState::archetype_component_access</code> has been removed. You can work around this by accessing the surrounding <code>SystemState</code>s instead.</li>
<li><code>QueryState::new_archetype</code> and <code>QueryState::update_archetype_component_access</code> now require an <code>&amp;mut Access&lt;ArchetypeComponentId&gt;</code> as a parameter.</li>
</ul>
<h3 id="remove-worldcell"><a href="https://github.com/bevyengine/bevy/pull/12551">Remove <code>WorldCell</code></a>
<a class="anchor-link" href="#remove-worldcell">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
</div>
<p><code>WorldCell</code> has been removed due to its incomplete, less performant, and potentially confusing nature. If you were using it to fetch multiple distinct values, consider using a <code>SystemState</code> instead with the <code>SystemState::get()</code> method.</p>
<p>If <code>SystemState</code> does not fit your use-case and <code>unsafe</code> is tolerable, you can use <code>UnsafeWorldCell</code>. It is more performant and featureful, but lacks the runtime checks.</p>
<h3 id="return-iterator-instead-of-slice-for-querystate-matched-tables-and-querystate-matches-archtypes"><a href="https://github.com/bevyengine/bevy/pull/12476">Return iterator instead of slice for <code>QueryState::matched_tables</code> and <code>QueryState::matches_archtypes</code></a>
<a class="anchor-link" href="#return-iterator-instead-of-slice-for-querystate-matched-tables-and-querystate-matches-archtypes">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
</div>
<p><code>QueryState::matched_tables</code> and <code>QueryState::matched_archetypes</code> now return iterators instead of slices. If possible, use the combinators available from the <a href="https://doc.rust-lang.org/std/iter/trait.Iterator.html"><code>Iterator</code></a> trait. In a worst-case scenario you may call <code>Iterator::collect()</code> into a <code>Vec</code>, which can then be converted into a slice.</p>
<h3 id="remove-system-stepping-from-default-features"><a href="https://github.com/bevyengine/bevy/pull/12847">Remove system stepping from default features</a>
<a class="anchor-link" href="#remove-system-stepping-from-default-features">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
</div>
<p>The system stepping feature is now disabled by default. It generally should not be included in shipped games, and adds a small but measurable performance overhead. To enable it, add the <code>bevy_debug_stepping</code> feature to your <code>Cargo.toml</code>:</p>
<pre data-lang="toml" class="language-toml z-code"><code class="language-toml" data-lang="toml"><span class="z-source z-toml"><span class="z-punctuation z-definition z-table z-begin z-toml">[</span><span class="z-meta z-tag z-table z-toml"><span class="z-entity z-name z-table z-toml">dependencies</span></span><span class="z-punctuation z-definition z-table z-end z-toml">]</span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">bevy</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-punctuation z-definition z-inline-table z-begin z-toml">{</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">version</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">&quot;</span>0.14<span class="z-punctuation z-definition z-string z-end z-toml">&quot;</span></span><span class="z-punctuation z-separator z-inline-table z-toml">,</span> <span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">features</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-punctuation z-definition z-array z-begin z-toml">[</span><span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">&quot;</span>bevy_debug_stepping<span class="z-punctuation z-definition z-string z-end z-toml">&quot;</span></span><span class="z-punctuation z-definition z-array z-end z-toml">]</span> <span class="z-punctuation z-definition z-inline-table z-end z-toml">}</span>
</span></code></pre>
<p>Code using <code>Stepping</code> will still compile with the feature disabled, but will print an error message at runtime if the application calls <code>Stepping::enable()</code>.</p>
<h3 id="optimize-event-updates-and-virtual-time"><a href="https://github.com/bevyengine/bevy/pull/12936">Optimize event updates and virtual time</a>
<a class="anchor-link" href="#optimize-event-updates-and-virtual-time">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
</div>
<p><code>Events::update()</code> has been optimized to be <code>O(1)</code> for the amount of events registered. In doing so, a few systems and run conditions have been changed.</p>
<p>Events are registered to a <code>World</code> using <code>EventRegistry</code> instead of the <code>Events</code> resource:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust">world<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">insert_resource</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">Events<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>MyEvent<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-meta z-path z-rust"><span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-meta z-path z-rust">EventRegistry<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">register_event<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>MyEvent<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&amp;</span><span class="z-storage z-modifier z-rust">mut</span> world</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<p>A few systems and run conditions have been changed as well:</p>
<ul>
<li><code>event_update_system</code> no longer uses generics and now has different arguments.</li>
<li><code>signal_event_update_system</code> now has different arguments.</li>
<li><code>reset_event_update_signal_system</code> has been removed.</li>
<li><code>event_update_condition</code> now has different arguments.</li>
</ul>
<p>While not related to events, the <code>virtual_time_system</code> has been changed as well. It has been converted from a system to a regular function, and now takes <code>&amp;T</code> and <code>&amp;mut T</code> instead of <code>Res&lt;T&gt;</code> and <code>ResMut&lt;T&gt;</code>.</p>
<h3 id="make-systemparam-new-archetype-and-querystate-new-archetype-unsafe"><a href="https://github.com/bevyengine/bevy/pull/13044">Make <code>SystemParam::new_archetype</code> and <code>QueryState::new_archetype</code> unsafe</a>
<a class="anchor-link" href="#make-systemparam-new-archetype-and-querystate-new-archetype-unsafe">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
</div>
<p><code>QueryState::new_archetype</code> and <code>SystemParam::new_archetype</code> are now unsafe functions because they do not ensure that the provided <code>Archetype</code> is from the same <code>World</code> that the state was initialized from. You will need to wrap any usage inside of an <code>unsafe</code> block, and you may need to write additional assertions to verify correct usage.</p>
<h3 id="better-systemid-and-entity-conversion"><a href="https://github.com/bevyengine/bevy/pull/13090">Better <code>SystemId</code> and <code>Entity</code> conversion</a>
<a class="anchor-link" href="#better-systemid-and-entity-conversion">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
</div>
<p>If you need to access the underlying <code>Entity</code> for a one-shot system's <code>SystemId</code>, use the new <code>SystemId::entity()</code> method.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> system_id <span class="z-keyword z-operator z-assignment z-rust">=</span> world<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">register_system</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>my_system</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> entity <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Entity<span class="z-punctuation z-accessor z-rust">::</span></span>from<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>system_id</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> system_id <span class="z-keyword z-operator z-assignment z-rust">=</span> world<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">register_system</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>my_system</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> entity <span class="z-keyword z-operator z-assignment z-rust">=</span> system_id<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">entity</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="make-nextstate-an-enum"><a href="https://github.com/bevyengine/bevy/pull/11426">Make <code>NextState</code> an enum</a>
<a class="anchor-link" href="#make-nextstate-an-enum">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
</div>
<p><code>NextState</code> has been converted from a unit struct to an enum. If you accessed the internal <code>Option</code> directly, whether through <code>NextState::0</code> or matching, you will have to update your code to handle this change.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> state <span class="z-keyword z-operator z-assignment z-rust">=</span> next_state<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-support z-function z-rust">unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-meta z-path z-rust">NextState<span class="z-punctuation z-accessor z-rust">::</span></span>Pending<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>state</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> next_state <span class="z-keyword z-control z-rust">else</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> <span class="z-support z-macro z-rust">panic!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>No pending next state!<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<table><thead><tr><th>0.13</th><th>0.14</th></tr></thead><tbody>
<tr><td><code>NextState(Some(S))</code></td><td><code>NextState::Pending(S)</code></td></tr>
<tr><td><code>NextState(None)</code></td><td><code>NextState::Unchanged</code></td></tr>
</tbody></table>
<h3 id="separate-states-from-core-ecs"><a href="https://github.com/bevyengine/bevy/pull/13216">Separate states from core ECS</a>
<a class="anchor-link" href="#separate-states-from-core-ecs">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
</div>
<p>States were moved to a separate crate which is gated behind the <code>bevy_state</code> feature. Projects that use state but don't use Bevy's <code>default-features</code> will need to add this feature to their <code>Cargo.toml</code>.</p>
<p>Projects that use <code>bevy_ecs</code> directly and use states will need to add the <code>bevy_state</code> <strong>crate</strong> as a dependency.</p>
<p>Projects that use <code>bevy_app</code> directly and use states will need to add the <code>bevy_state</code> <strong>feature</strong>.</p>
<p>If you do not use <code>DefaultPlugins</code>, you will need to add the <code>StatesPlugin</code> manually to your app.</p>
<p>Users should update imports that referenced the old location.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">bevy<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">ecs<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">schedule<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>NextState<span class="z-punctuation z-separator z-rust">,</span> OnEnter<span class="z-punctuation z-separator z-rust">,</span> OnExit<span class="z-punctuation z-separator z-rust">,</span> OnTransition<span class="z-punctuation z-separator z-rust">,</span> State<span class="z-punctuation z-separator z-rust">,</span> States</span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">bevy<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">ecs<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">schedule<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">common_conditions<span class="z-punctuation z-accessor z-rust">::</span></span>in_state
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">bevy<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">state<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">state<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>NextState<span class="z-punctuation z-separator z-rust">,</span> OnEnter<span class="z-punctuation z-separator z-rust">,</span> OnExit<span class="z-punctuation z-separator z-rust">,</span> OnTransition<span class="z-punctuation z-separator z-rust">,</span> State<span class="z-punctuation z-separator z-rust">,</span> States</span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">bevy<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">state<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">condition<span class="z-punctuation z-accessor z-rust">::</span></span>in_state<span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="constrain-worldquery-get-state-to-only-accept-components"><a href="https://github.com/bevyengine/bevy/pull/13343">Constrain <code>WorldQuery::get_state()</code> to only accept <code>Components</code></a>
<a class="anchor-link" href="#constrain-worldquery-get-state-to-only-accept-components">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
</div>
<p>A few methods of <code>WorldQuery</code> and <code>QueryState</code> were unsound because they were passed an <code>&amp;World</code>. They are now restricted to just take an <code>&amp;Components</code>. The affected methods are:</p>
<ul>
<li><code>WorldQuery::get_state()</code></li>
<li><code>QueryState::transmute()</code></li>
<li><code>QueryState::transmute_filtered()</code></li>
<li><code>QueryState::join()</code></li>
<li><code>QueryState::join_filtered()</code></li>
</ul>
<p>To access <code>Components</code> from a <code>World</code>, call <code>World::components()</code>.</p>
<p>If you manually implemented <code>WorldQuery</code>, you need to update <code>get_state()</code> to only use the information provided by <code>Components</code>.</p>
<h3 id="unify-state-transition-names-to-exited-and-entered"><a href="https://github.com/bevyengine/bevy/pull/13594">Unify state transition names to <code>exited</code> and <code>entered</code></a>
<a class="anchor-link" href="#unify-state-transition-names-to-exited-and-entered">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
</div>
<p><code>StateTransitionEvent</code>'s <code>before</code> and <code>after</code> fields have been renamed to <code>exited</code> and <code>entered</code> for consistency. You will have to update your usage if you access these fields or construct <code>StateTransitionEvent</code>.</p>
<h3 id="make-apply-state-transition-private"><a href="https://github.com/bevyengine/bevy/pull/13626">Make <code>apply_state_transition</code> private</a>
<a class="anchor-link" href="#make-apply-state-transition-private">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
</div>
<p>The <code>apply_state_transition</code> system is no longer public. The easiest way to migrate your systems that depended on it for ordering is to create a custom schedule.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_plugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>DefaultPlugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>StateTransition<span class="z-punctuation z-separator z-rust">,</span> my_system<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">after</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>apply_state_transition</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">ScheduleLabel<span class="z-punctuation z-separator z-rust">,</span> Debug<span class="z-punctuation z-separator z-rust">,</span> Hash<span class="z-punctuation z-separator z-rust">,</span> PartialEq<span class="z-punctuation z-separator z-rust">,</span> Eq<span class="z-punctuation z-separator z-rust">,</span> Clone</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">AfterStateTransition</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> app <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">App<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust">app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_plugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>DefaultPlugins</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>AfterStateTransition<span class="z-punctuation z-separator z-rust">,</span> my_system</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Create a new schedule and add it to the app.
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> after_state_transition <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Schedule<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>AfterStateTransition</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_schedule</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>after_state_transition</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Modify the schedule order to make this run after `StateTransition`.
</span></span><span class="z-source z-rust">app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">world_mut</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-meta z-path z-rust">resource_mut<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>MainScheduleOrder<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">insert_after</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>StateTransition<span class="z-punctuation z-separator z-rust">,</span> AfterStateTransition</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust">app<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">run</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre>
<h3 id="replace-fromworld-requirement-on-reflectresource-and-reflect-resource-for-state-s"><a href="https://github.com/bevyengine/bevy/pull/12136">Replace <code>FromWorld</code> requirement on <code>ReflectResource</code> and reflect <code>Resource</code> for <code>State&lt;S&gt;</code></a>
<a class="anchor-link" href="#replace-fromworld-requirement-on-reflectresource-and-reflect-resource-for-state-s">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
<div class="migration-guide-area-tag">Reflection</div>
</div>
<ul>
<li>Users of <code>#[reflect(Resource)]</code> will need to also implement/derive <code>FromReflect</code> (should already be the default).</li>
<li>Users of <code>#[reflect(Resource)]</code> may now want to also add <code>FromWorld</code> to the list of reflected traits in case their <code>FromReflect</code> implementation may fail.</li>
<li>Users of <code>ReflectResource</code> will now need to pass a <code>&amp;TypeRegistry</code> to its <code>insert</code>, <code>apply_or_insert</code> and <code>copy</code> methods.</li>
</ul>
<h3 id="make-some-reflectcomponent-reflectbundle-methods-work-with-entitymut-too"><a href="https://github.com/bevyengine/bevy/pull/12895">Make some <code>ReflectComponent</code>/<code>ReflectBundle</code> methods work with <code>EntityMut</code> too</a>
<a class="anchor-link" href="#make-some-reflectcomponent-reflectbundle-methods-work-with-entitymut-too">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
<div class="migration-guide-area-tag">Reflection</div>
</div>
<ul>
<li><code>ReflectComponentFns</code>s <code>apply</code> and <code>reflect_mut</code> fields now take <code>EntityMut</code> instead of <code>&amp;mut EntityWorldMut</code></li>
<li><code>ReflectBundleFns</code>s <code>apply</code> field now takes <code>EntityMut</code> instead of <code>&amp;mut EntityWorldMut</code></li>
</ul>
<h3 id="make-from-reflect-or-world-also-try-reflectdefault-and-improve-some-comments-and-panic-messages"><a href="https://github.com/bevyengine/bevy/pull/12499">Make <code>from_reflect_or_world</code> also try <code>ReflectDefault</code> and improve some comments and panic messages</a>
<a class="anchor-link" href="#make-from-reflect-or-world-also-try-reflectdefault-and-improve-some-comments-and-panic-messages">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
<div class="migration-guide-area-tag">Reflection</div>
</div>
<p><code>ReflectBundle::insert</code> now requires an additional <code>&amp;TypeRegistry</code> parameter.</p>
<h3 id="generalize-component-reflection-to-operate-on-filteredentityref-and-filteredentitymut-not-entityref-and-entitymut"><a href="https://github.com/bevyengine/bevy/pull/13549">Generalize component reflection to operate on <code>FilteredEntityRef</code> and <code>FilteredEntityMut</code>, not <code>EntityRef</code> and <code>EntityMut</code>.</a>
<a class="anchor-link" href="#generalize-component-reflection-to-operate-on-filteredentityref-and-filteredentitymut-not-entityref-and-entitymut">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
<div class="migration-guide-area-tag">Reflection</div>
</div>
<ul>
<li><code>ReflectComponent::contains</code>, <code>ReflectComponent::reflect</code>, and <code>ReflectComponent::reflect_mut</code> now take <code>FilteredEntityRef</code> (in the case of <code>contains()</code> and <code>reflect()</code>) and <code>FilteredEntityMut</code> (in the case of <code>reflect_mut()</code>) parameters. <code>FilteredEntityRef</code> and <code>FilteredEntityMut</code> have very similar APIs to <code>EntityRef</code> and <code>EntityMut</code> respectively, but optionally restrict the components that can be accessed.</li>
</ul>
<h3 id="multi-threaded-feature-rename"><a href="https://github.com/bevyengine/bevy/pull/12997">multi_threaded feature rename</a>
<a class="anchor-link" href="#multi-threaded-feature-rename">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
<div class="migration-guide-area-tag">Tasks</div>
</div>
<p>The <code>multi-threaded</code> feature was renamed to <code>multi_threaded</code> for <code>bevy</code>, <code>bevy_asset</code>, <code>bevy_ecs</code>, <code>bevy_render</code>, <code>bevy_tasks</code>, and <code>bevy_internal</code>. Please update your <code>Cargo.toml</code> if you manually specify Bevy features.</p>
<h3 id="moves-intern-and-label-modules-into-bevy-ecs"><a href="https://github.com/bevyengine/bevy/pull/12772">Moves intern and label modules into bevy_ecs</a>
<a class="anchor-link" href="#moves-intern-and-label-modules-into-bevy-ecs">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">ECS</div>
<div class="migration-guide-area-tag">Utils</div>
</div>
<ul>
<li>Replace <code>bevy_utils::define_label</code> imports with <code>bevy_ecs::define_label</code> imports.</li>
<li>Replace <code>bevy_utils::label::DynEq</code> imports with <code>bevy_ecs::label::DynEq</code> imports.</li>
<li>Replace <code>bevy_utils::label::DynHash</code> imports with <code>bevy_ecs::label::DynHash</code> imports.</li>
<li>Replace <code>bevy_utils::intern::Interned</code> imports with <code>bevy_ecs::intern::Interned</code> imports.</li>
<li>Replace <code>bevy_utils::intern::Internable</code> imports with <code>bevy_ecs::intern::Internable</code> imports.</li>
<li>Replace <code>bevy_utils::intern::Interner</code> imports with <code>bevy_ecs::intern::Interner</code> imports.</li>
</ul>
<h3 id="implement-the-animationgraph-allowing-for-multiple-animations-to-be-blended-together"><a href="https://github.com/bevyengine/bevy/pull/11989">Implement the <code>AnimationGraph</code>, allowing for multiple animations to be blended together.</a>
<a class="anchor-link" href="#implement-the-animationgraph-allowing-for-multiple-animations-to-be-blended-together">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Editor</div>
</div>
<ul>
<li>
<p><code>AnimationPlayer</code>s can no longer play animations by themselves and need to be paired with a <code>Handle&lt;AnimationGraph&gt;</code>. Code that was using <code>AnimationPlayer</code> to play animations will need to create an <code>AnimationGraph</code> asset first, add a node for the clip (or clips) you want to play, and then supply the index of that node to the <code>AnimationPlayer</code>s <code>play</code> method.</p>
</li>
<li>
<p>The <code>AnimationPlayer::play_with_transition()</code> method has been removed and replaced with the <code>AnimationTransitions</code> component. If you were previously using <code>AnimationPlayer::play_with_transition()</code>, add all animations that you were playing to the <code>AnimationGraph</code>, and create an <code>AnimationTransitions</code> component to manage the blending between them.</p>
</li>
</ul>
<h3 id="gizmo-line-joints"><a href="https://github.com/bevyengine/bevy/pull/12252">Gizmo line joints</a>
<a class="anchor-link" href="#gizmo-line-joints">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Gizmos</div>
</div>
<p>Any manually created <code>GizmoConfig</code>s must now set the <code>.line_joints</code> field.</p>
<h3 id="gizmo-line-styles"><a href="https://github.com/bevyengine/bevy/pull/12394">Gizmo line styles</a>
<a class="anchor-link" href="#gizmo-line-styles">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Gizmos</div>
</div>
<p>Any manually created <code>GizmoConfig</code> must now include the <code>line_style</code> attribute</p>
<h3 id="inconsistent-segments-resolution-naming"><a href="https://github.com/bevyengine/bevy/pull/13438">Inconsistent segments/resolution naming</a>
<a class="anchor-link" href="#inconsistent-segments-resolution-naming">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Gizmos</div>
</div>
<p>When working with gizmos, replace all calls to <code>.segments(...)</code> with <code>.resolution(...)</code></p>
<h3 id="make-gizmos-take-primitives-by-ref"><a href="https://github.com/bevyengine/bevy/pull/13534">Make gizmos take primitives by ref</a>
<a class="anchor-link" href="#make-gizmos-take-primitives-by-ref">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Gizmos</div>
</div>
<ul>
<li>Any usages of <code>gizmos.primitive_2d()</code> and/or <code>gizmos.primitive_3d()</code> need to be updated to pass the primitive in by reference.</li>
</ul>
<h3 id="more-gizmos-builders"><a href="https://github.com/bevyengine/bevy/pull/13261">More gizmos builders</a>
<a class="anchor-link" href="#more-gizmos-builders">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Gizmos</div>
</div>
<ul>
<li>Some <code>gizmos.primitive_nd</code> methods now return some or different builders. You may need to adjust types and match statements</li>
<li>Replace any calls to <code>circle_segments()</code> with <code>.segments()</code></li>
</ul>
<h3 id="rename-touchpad-to-gesture-and-add-new-gestures"><a href="https://github.com/bevyengine/bevy/pull/13660">rename touchpad to gesture, and add new gestures</a>
<a class="anchor-link" href="#rename-touchpad-to-gesture-and-add-new-gestures">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Input</div>
</div>
<ul>
<li><code>TouchpadMagnify</code> has been renamed to <code>PinchGesture</code></li>
<li><code>TouchpadRotate</code> has been renamed to <code>RotationGesture </code></li>
</ul>
<h3 id="deprecate-receivedcharacter"><a href="https://github.com/bevyengine/bevy/pull/12868">Deprecate <code>ReceivedCharacter</code></a>
<a class="anchor-link" href="#deprecate-receivedcharacter">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Input</div>
<div class="migration-guide-area-tag">Windowing</div>
</div>
<p><code>ReceivedCharacter</code> is now deprecated, use <code>KeyboardInput</code> instead.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">listen_characters</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">events</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">EventReader<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>ReceivedCharacter<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">  <span class="z-keyword z-control z-rust">for</span> event <span class="z-keyword z-operator z-rust">in</span> events<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">read</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    <span class="z-support z-macro z-rust">info!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>{}<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span><span class="z-punctuation z-separator z-rust">,</span> event<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-storage z-type z-rust">char</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">  </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">listen_characters</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">events</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">EventReader<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>KeyboardInput<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">  <span class="z-keyword z-control z-rust">for</span> event <span class="z-keyword z-operator z-rust">in</span> events<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">read</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Only check for characters when the key is pressed.
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">if</span> <span class="z-keyword z-operator z-logical z-rust">!</span>event<span class="z-punctuation z-accessor z-dot z-rust">.</span>state<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">is_pressed</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">      <span class="z-keyword z-control z-rust">continue</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Note that some keys such as `Space` and `Tab` won&#39;t be detected as before.
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Instead, check for them with `Key::Space` and `Key::Tab`.
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">match</span> <span class="z-keyword z-operator z-bitwise z-rust">&amp;</span>event<span class="z-punctuation z-accessor z-dot z-rust">.</span>logical_key <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-meta z-path z-rust">Key<span class="z-punctuation z-accessor z-rust">::</span></span>Character<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>character</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-rust">=&gt;</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            <span class="z-support z-macro z-rust">info!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>{} pressed.<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span><span class="z-punctuation z-separator z-rust">,</span> character</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-meta z-path z-rust">Key<span class="z-punctuation z-accessor z-rust">::</span></span>Space <span class="z-keyword z-operator z-rust">=&gt;</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            <span class="z-support z-macro z-rust">info!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>Space pressed.<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-operator z-rust">_</span> <span class="z-keyword z-operator z-rust">=&gt;</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">  </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<h3 id="flush-key-input-cache-when-bevy-loses-focus-adopted"><a href="https://github.com/bevyengine/bevy/pull/13678">flush key_input cache when Bevy loses focus (Adopted)</a>
<a class="anchor-link" href="#flush-key-input-cache-when-bevy-loses-focus-adopted">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Input</div>
<div class="migration-guide-area-tag">Windowing</div>
</div>
<p><code>WinitEvent</code> has a new enum variant: <code>WinitEvent::KeyboardFocusLost</code>.</p>
<h3 id="add-direction3da-and-move-direction-types-out-of-primitives"><a href="https://github.com/bevyengine/bevy/pull/12018">Add <code>Direction3dA</code> and move direction types out of <code>primitives</code></a>
<a class="anchor-link" href="#add-direction3da-and-move-direction-types-out-of-primitives">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Math</div>
</div>
<p>The <code>Direction2d</code>, <code>Direction3d</code>, and <code>InvalidDirectionError</code> types have been moved from <code>bevy::math::primitives</code> to <code>bevy::math</code>.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">bevy<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">math<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">primitives<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>Direction2d<span class="z-punctuation z-separator z-rust">,</span> Direction3d<span class="z-punctuation z-separator z-rust">,</span> InvalidDirectionError</span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">bevy<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">math<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>Direction2d<span class="z-punctuation z-separator z-rust">,</span> Direction3d<span class="z-punctuation z-separator z-rust">,</span> InvalidDirectionError</span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="rename-direction2d-3d-to-dir2-3"><a href="https://github.com/bevyengine/bevy/pull/12189">Rename <code>Direction2d/3d</code> to <code>Dir2/3</code></a>
<a class="anchor-link" href="#rename-direction2d-3d-to-dir2-3">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Math</div>
</div>
<p>The <code>Direction2d</code> and <code>Direction3d</code> types have been renamed to <code>Dir2</code> and <code>Dir3</code>.</p>
<h3 id="make-cardinal-splines-include-endpoints"><a href="https://github.com/bevyengine/bevy/pull/12574">Make cardinal splines include endpoints</a>
<a class="anchor-link" href="#make-cardinal-splines-include-endpoints">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Math</div>
</div>
<p>Any users relying on the old behavior of <code>CubicCardinalSpline</code> will have to truncate any parametrizations they used in order to access a curve identical to the one they had previously. This would be done by chopping off a unit-distance segment from each end of the parametrizing interval. For instance, if a users existing code looks as follows</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">interpolate</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">t</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">f32</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-&gt;</span> Vec2</span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> points <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">        <span class="z-support z-function z-rust">vec2</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-arithmetic z-rust">-</span><span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-keyword z-operator z-arithmetic z-rust">-</span><span class="z-constant z-numeric z-float z-rust">20.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">        <span class="z-support z-function z-rust">vec2</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">3.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">2.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">        <span class="z-support z-function z-rust">vec2</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">5.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">3.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">        <span class="z-support z-function z-rust">vec2</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">9.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">8.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">    <span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> my_curve <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">CubicCardinalSpline<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">3</span><span class="z-punctuation z-separator z-rust">,</span> points</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">to_curve</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    my_curve<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">position</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>t</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<p>then in order to obtain similar behavior, <code>t</code> will need to be shifted up by 1, since the output of <code>CubicCardinalSpline::to_curve</code> has introduced a new segment in the interval [0,1], displacing the old segment from [0,1] to [1,2]:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">interpolate</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">t</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">f32</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-&gt;</span> Vec2</span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> points <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">        <span class="z-support z-function z-rust">vec2</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-arithmetic z-rust">-</span><span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-keyword z-operator z-arithmetic z-rust">-</span><span class="z-constant z-numeric z-float z-rust">20.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">        <span class="z-support z-function z-rust">vec2</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">3.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">2.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">        <span class="z-support z-function z-rust">vec2</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">5.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">3.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">        <span class="z-support z-function z-rust">vec2</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">9.</span><span class="z-constant z-numeric z-float z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-float z-rust">8.</span><span class="z-constant z-numeric z-float z-rust">0</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">    <span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> my_curve <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">CubicCardinalSpline<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-float z-rust">0.</span><span class="z-constant z-numeric z-float z-rust">3</span><span class="z-punctuation z-separator z-rust">,</span> points</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">to_curve</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    my_curve<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">position</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>t<span class="z-keyword z-operator z-arithmetic z-rust">+</span><span class="z-constant z-numeric z-integer z-decimal z-rust">1</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<p>(Note that this does not provide identical output for values of <code>t</code> outside of the interval [0,1].)</p>
<p>On the other hand, any user who was specifying additional endpoint tangents simply to get the curve to pass through the right points (i.e. not requiring exactly the same output) can simply omit the endpoints that were being supplied only for control purposes.</p>
<h3 id="move-point-out-of-cubic-splines-module-and-expand-it"><a href="https://github.com/bevyengine/bevy/pull/12747">Move <code>Point</code> out of cubic splines module and expand it</a>
<a class="anchor-link" href="#move-point-out-of-cubic-splines-module-and-expand-it">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Math</div>
</div>
<p>Since <code>Point</code> no longer exists, any projects using it must switch to <code>bevy::math::VectorSpace</code>. Additionally, third-party implementations of this trait now require the <code>Neg</code> trait; the constant <code>VectorSpace::ZERO</code> must be provided as well.</p>
<h3 id="remove-vectorspace-impl-on-quat"><a href="https://github.com/bevyengine/bevy/pull/12796">Remove VectorSpace impl on Quat</a>
<a class="anchor-link" href="#remove-vectorspace-impl-on-quat">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Math</div>
</div>
<p><code>Quat</code> no longer implements <code>VectorSpace</code> as unit quaternions dont actually form proper vector spaces. If youre absolutely certain that what youre doing is correct, convert the <code>Quat</code> into a <code>Vec4</code> and perform the operations before converting back.</p>
<h3 id="meshing-for-triangle3d-primitive"><a href="https://github.com/bevyengine/bevy/pull/12686">Meshing for <code>Triangle3d</code> primitive</a>
<a class="anchor-link" href="#meshing-for-triangle3d-primitive">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Math</div>
</div>
<p>The UV-mapping of <code>Triangle2d</code> has changed with this PR; the main difference is that the UVs are no longer dependent on the triangles absolute coordinates, but instead follow translations of the triangle itself in its definition. If you depended on the old UV-coordinates for <code>Triangle2d</code>, then you will have to update affected areas to use the new ones which, briefly, can be described as follows:</p>
<ul>
<li>The first coordinate is parallel to the line between the first two vertices of the triangle.</li>
<li>The second coordinate is orthogonal to this, pointing in the direction of the third point.</li>
</ul>
<p>Generally speaking, this means that the first two points will have coordinates <code>[_, 0.]</code>, while the third coordinate will be <code>[_, 1.]</code>, with the exact values depending on the position of the third point relative to the first two. For acute triangles, the first two vertices always have UV-coordinates <code>[0., 0.]</code> and <code>[1., 0.]</code> respectively. For obtuse triangles, the third point will have coordinate <code>[0., 1.]</code> or <code>[1., 1.]</code>, with the coordinate of one of the two other points shifting to maintain proportionality.</p>
<p>For example: </p>
<ul>
<li>The default <code>Triangle2d</code> has UV-coordinates <code>[0., 0.]</code>, <code>[0., 1.]</code>, [<code>0.5, 1.]</code>.</li>
<li>The triangle with vertices <code>vec2(0., 0.)</code>, <code>vec2(1., 0.)</code>, <code>vec2(2., 1.)</code> has UV-coordinates <code>[0., 0.]</code>, <code>[0.5, 0.]</code>, <code>[1., 1.]</code>.</li>
<li>The triangle with vertices <code>vec2(0., 0.)</code>, <code>vec2(1., 0.)</code>, <code>vec2(-2., 1.)</code> has UV-coordinates <code>[2./3., 0.]</code>, <code>[1., 0.]</code>, <code>[0., 1.]</code>.</li>
</ul>
<h3 id="use-vec3a-for-3d-bounding-volumes-and-raycasts"><a href="https://github.com/bevyengine/bevy/pull/13087">Use Vec3A for 3D bounding volumes and raycasts</a>
<a class="anchor-link" href="#use-vec3a-for-3d-bounding-volumes-and-raycasts">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Math</div>
</div>
<p>3D bounding volumes now use <code>Vec3A</code> types internally, return values from methods on them now return <code>Vec3A</code> instead of <code>Vec3</code></p>
<h3 id="update-glam-version-requirement-from-0-25-to-0-27"><a href="https://github.com/bevyengine/bevy/pull/12757">Update glam version requirement from 0.25 to 0.27</a>
<a class="anchor-link" href="#update-glam-version-requirement-from-0-25-to-0-27">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Math</div>
</div>
<p>When using <code>glam</code> exports, keep in mind that <code>vector</code> <code>fract()</code> method now matches Rust implementation (that is <code>self - self.trunc()</code> instead of <code>self - self.floor()</code>). If you want to use the GLSL implementation you should now use <code>fract_gl()</code>.</p>
<h3 id="common-meshbuilder-trait"><a href="https://github.com/bevyengine/bevy/pull/13411">Common <code>MeshBuilder</code> trait</a>
<a class="anchor-link" href="#common-meshbuilder-trait">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Math</div>
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>When calling <code>.build()</code> you need to import <code>bevy_render::mesh::primitives::MeshBuilder</code></p>
<h3 id="additional-options-to-mesh-primitives"><a href="https://github.com/bevyengine/bevy/pull/13605">Additional options to mesh primitives</a>
<a class="anchor-link" href="#additional-options-to-mesh-primitives">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Math</div>
<div class="migration-guide-area-tag">Rendering</div>
</div>
<!-- TODO -->
<h3 id="add-subdivisions-to-planemeshbuilder"><a href="https://github.com/bevyengine/bevy/pull/13580">Add subdivisions to PlaneMeshBuilder</a>
<a class="anchor-link" href="#add-subdivisions-to-planemeshbuilder">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Math</div>
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>If you were using <code>Plane</code> <code>subdivisions</code>, you now need to use <code>Plane3d::default().mesh().subdivisions(10)</code></p>
<p>fixes https://github.com/bevyengine/bevy/issues/13258</p>
<h3 id="make-transform-rotate-axis-and-transform-rotate-local-axis-use-dir3"><a href="https://github.com/bevyengine/bevy/pull/12986">Make <code>Transform::rotate_axis</code> and <code>Transform::rotate_local_axis</code> use <code>Dir3</code></a>
<a class="anchor-link" href="#make-transform-rotate-axis-and-transform-rotate-local-axis-use-dir3">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Math</div>
<div class="migration-guide-area-tag">Transform</div>
</div>
<p>All calls to <code>Transform::rotate_axis</code> and <code>Transform::rotate_local_axis</code> will need to be updated to use a <code>Dir3</code> for the <code>axis</code> parameter rather than a <code>Vec3</code>. For a general input, this means calling <code>Dir3::new</code> and handling the <code>Result</code>, but if the previous vector is already known to be normalized, <code>Dir3::new_unchecked</code> can be called instead. Note that literals like <code>Vec3::X</code> also have corresponding <code>Dir3</code> literals; e.g. <code>Dir3::X</code>, <code>Dir3::NEG_Y</code> and so on.</p>
<h3 id="use-dir3-for-local-axis-methods-in-globaltransform"><a href="https://github.com/bevyengine/bevy/pull/13264">Use <code>Dir3</code> for local axis methods in <code>GlobalTransform</code></a>
<a class="anchor-link" href="#use-dir3-for-local-axis-methods-in-globaltransform">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Math</div>
<div class="migration-guide-area-tag">Transform</div>
</div>
<p>The <code>GlobalTransform</code> components directional axis methods (e.g., <code>right()</code>, <code>left()</code>, <code>up()</code>, <code>down()</code>, <code>back()</code>, <code>forward()</code>) have been updated from returning <code>Vec3</code> to <code>Dir3</code>.</p>
<h3 id="fix-ord-and-partialord-differing-for-floatord-and-optimize-implementation"><a href="https://github.com/bevyengine/bevy/pull/12711">Fix <code>Ord</code> and <code>PartialOrd</code> differing for <code>FloatOrd</code> and optimize implementation</a>
<a class="anchor-link" href="#fix-ord-and-partialord-differing-for-floatord-and-optimize-implementation">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Math</div>
<div class="migration-guide-area-tag">Utils</div>
</div>
<p>If you were depending on the <code>PartialOrd</code> behaviour of <code>FloatOrd</code>, it has changed from matching <code>f32</code> to matching <code>FloatOrd</code>s <code>Ord</code> ordering, never returning <code>None</code>.</p>
<h3 id="move-floatord-into-bevy-math"><a href="https://github.com/bevyengine/bevy/pull/12732">Move FloatOrd into bevy_math</a>
<a class="anchor-link" href="#move-floatord-into-bevy-math">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Math</div>
<div class="migration-guide-area-tag">Utils</div>
</div>
<p><code>FloatOrd</code> has been moved to <code>bevy_math</code>.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">bevy<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">utils<span class="z-punctuation z-accessor z-rust">::</span></span>FloatOrd<span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">bevy<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">math<span class="z-punctuation z-accessor z-rust">::</span></span>FloatOrd<span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="reflect-treat-proxy-types-correctly-when-serializing"><a href="https://github.com/bevyengine/bevy/pull/12024">reflect: treat proxy types correctly when serializing</a>
<a class="anchor-link" href="#reflect-treat-proxy-types-correctly-when-serializing">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Reflection</div>
</div>
<p>If <code>ReflectSerialize</code> is registered on a type, but <code>TypePath</code> or <code>FromReflect</code> implementations are omitted (perhaps by <code>#[reflect(type_path = false)</code> or <code>#[reflect(from_reflect = false)]</code>), the traits must now be implemented.</p>
<h3 id="bevy-reflect-recursive-registration"><a href="https://github.com/bevyengine/bevy/pull/5781">bevy_reflect: Recursive registration</a>
<a class="anchor-link" href="#bevy-reflect-recursive-registration">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Reflection</div>
</div>
<p>All types that derive <code>Reflect</code> will now automatically add <code>GetTypeRegistration</code> as a bound on all (unignored) fields. This means that all reflected fields will need to also implement <code>GetTypeRegistration</code>.</p>
<p>If all fields <strong>derive</strong> <code>Reflect</code> or are implemented in <code>bevy_reflect</code>, this should not cause any issues. However, manual implementations of <code>Reflect</code> that excluded a <code>GetTypeRegistration</code> impl for their type will need to add one.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">derive</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">Reflect</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-generic z-rust"><span class="z-entity z-name z-struct z-rust">Foo</span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>T<span class="z-punctuation z-separator z-rust">:</span> FromReflect<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span></span></span><span class="z-meta z-struct z-rust"> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">  <span class="z-variable z-other z-member z-rust">data</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-meta z-generic z-rust">MyCustomType<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>T<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> OLD
</span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span></span><span class="z-meta z-impl z-rust"><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>T<span class="z-punctuation z-separator z-rust">:</span> FromReflect<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span></span><span class="z-meta z-impl z-rust"> Reflect <span class="z-keyword z-other z-rust">for</span></span><span class="z-meta z-impl z-rust"> <span class="z-entity z-name z-impl z-rust">MyCustomType</span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>T<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span><span class="z-comment z-block z-rust"><span class="z-punctuation z-definition z-comment z-rust">/*</span> ... <span class="z-punctuation z-definition z-comment z-rust">*/</span></span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> NEW
</span></span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span></span><span class="z-meta z-impl z-rust"><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>T<span class="z-punctuation z-separator z-rust">:</span> FromReflect <span class="z-keyword z-operator z-rust">+</span> GetTypeRegistration<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span></span><span class="z-meta z-impl z-rust"> Reflect <span class="z-keyword z-other z-rust">for</span></span><span class="z-meta z-impl z-rust"> <span class="z-entity z-name z-impl z-rust">MyCustomType</span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>T<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span><span class="z-comment z-block z-rust"><span class="z-punctuation z-definition z-comment z-rust">/*</span> ... <span class="z-punctuation z-definition z-comment z-rust">*/</span></span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span></span><span class="z-meta z-impl z-rust"><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>T<span class="z-punctuation z-separator z-rust">:</span> FromReflect <span class="z-keyword z-operator z-rust">+</span> GetTypeRegistration<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span></span><span class="z-meta z-impl z-rust"> GetTypeRegistration <span class="z-keyword z-other z-rust">for</span></span><span class="z-meta z-impl z-rust"> <span class="z-entity z-name z-impl z-rust">MyCustomType</span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>T<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span><span class="z-comment z-block z-rust"><span class="z-punctuation z-definition z-comment z-rust">/*</span> ... <span class="z-punctuation z-definition z-comment z-rust">*/</span></span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<h3 id="bevy-reflect-rename-untypedreflectdeserializer-to-reflectdeserializer"><a href="https://github.com/bevyengine/bevy/pull/12721">bevy_reflect: Rename <code>UntypedReflectDeserializer</code> to <code>ReflectDeserializer</code></a>
<a class="anchor-link" href="#bevy-reflect-rename-untypedreflectdeserializer-to-reflectdeserializer">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Reflection</div>
</div>
<p><code>UntypedReflectDeserializer</code> has been renamed to <code>ReflectDeserializer</code>. Usages will need to be updated accordingly.</p>
<pre data-lang="diff" class="language-diff z-code"><code class="language-diff" data-lang="diff"><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span> let reflect_deserializer = UntypedReflectDeserializer::new(&amp;registry);
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span> let reflect_deserializer = ReflectDeserializer::new(&amp;registry);
</span></span></code></pre>
<h3 id="implement-reflect-for-result-t-e-as-enum"><a href="https://github.com/bevyengine/bevy/pull/13182">Implement Reflect for Result&lt;T, E&gt; as enum</a>
<a class="anchor-link" href="#implement-reflect-for-result-t-e-as-enum">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Reflection</div>
</div>
<p><code>Result&lt;T, E&gt;</code> has had its <code>Reflect</code> implementation changed to align it with <code>Option&lt;T&gt;</code> and its intended semantics: A carrier of either an <code>Ok</code> or <code>Err</code> value, and the ability to access it. To achieve this it is no longer a <code>ReflectKind::Value</code> but rather a <code>ReflectKind::Enum</code> and as such carries these changes with it:</p>
<p>For <code>Result&lt;T, E&gt;</code></p>
<ul>
<li>Both <code>T</code> and <code>E</code> no longer require to be <code>Clone</code> and now require to be <code>FromReflect</code></li>
<li><code>&lt;Result&lt;T, E&gt; as Reflect&gt;::reflect_*</code> now returns a <code>ReflectKind::Enum</code>, so any code that previously relied on it being a <code>Value</code> kind will have to be adapted.</li>
<li><code>Result&lt;T, E&gt;</code> now implements <code>Enum</code></li>
</ul>
<p>Since the migration is highly dependent on the previous usage, no automatic upgrade path can be given.</p>
<h3 id="fix-typeregistry-use-in-dynamic-scene"><a href="https://github.com/bevyengine/bevy/pull/12715">Fix TypeRegistry use in dynamic scene</a>
<a class="anchor-link" href="#fix-typeregistry-use-in-dynamic-scene">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Reflection</div>
<div class="migration-guide-area-tag">Scenes</div>
</div>
<ul>
<li><code>SceneSerializer</code> and all related serializing helper types now take a <code>&amp;TypeRegistry</code> instead of a <code>&amp;TypeRegistryArc</code>. You can upgrade by getting the former from the latter with <code>TypeRegistryArc::read()</code>, <em>e.g.</em></li>
</ul>
<pre data-lang="diff" class="language-diff z-code"><code class="language-diff" data-lang="diff"><span class="z-source z-diff">  let registry_arc: TypeRegistryArc = [...];
</span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span> let serializer = SceneSerializer(&amp;scene, &amp;registry_arc);
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span> let registry = registry_arc.read();
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span> let serializer = SceneSerializer(&amp;scene, &amp;registry);
</span></span></code></pre>
<ul>
<li>Rename <code>DynamicScene::serialize_ron()</code> to <code>serialize()</code>.</li>
</ul>
<h3 id="rename-camera3dbundle-s-dither-field-to-deband-dither-to-align-with-camera2dbundle"><a href="https://github.com/bevyengine/bevy/pull/11939">rename Camera3dBundle's 'dither' field to 'deband_dither' to align with Camera2dBundle</a>
<a class="anchor-link" href="#rename-camera3dbundle-s-dither-field-to-deband-dither-to-align-with-camera2dbundle">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>use the new <code>deband_dither</code> field name with <code>Camera3dBundle</code>, rather than the old field name, <code>dither</code></p>
<h3 id="add-support-for-khr-texture-transform"><a href="https://github.com/bevyengine/bevy/pull/11904">Add support for KHR_texture_transform</a>
<a class="anchor-link" href="#add-support-for-khr-texture-transform">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>Rename <code>affine_to_square</code> to <code>affine3_to_square</code></p>
<h3 id="move-alphamode-into-bevy-render"><a href="https://github.com/bevyengine/bevy/pull/12012">Move AlphaMode into bevy_render</a>
<a class="anchor-link" href="#move-alphamode-into-bevy-render">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p><code>AlphaMode</code> has been moved from <code>bevy_pbr</code> to <code>bevy_render</code>. If you import them directly, you will need to update your import statements.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">bevy<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">pbr<span class="z-punctuation z-accessor z-rust">::</span></span>AlphaMode<span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">bevy<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">render<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">alpha<span class="z-punctuation z-accessor z-rust">::</span></span>AlphaMode<span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="prefer-uvec2-when-working-with-texture-dimensions"><a href="https://github.com/bevyengine/bevy/pull/11698">Prefer <code>UVec2</code> when working with texture dimensions</a>
<a class="anchor-link" href="#prefer-uvec2-when-working-with-texture-dimensions">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>Change floating point types (<code>Vec2</code>, <code>Rect</code>) to their respective unsigned integer versions (<code>UVec2</code>, <code>URect</code>) when using <code>GpuImage</code>, <code>TextureAtlasLayout</code>, <code>TextureAtlasBuilder</code>, <code>DynamicAtlasTextureBuilder</code> or <code>FontAtlas</code>.</p>
<h3 id="fix-cameraprojectionplugin-not-implementing-plugin-in-some-cases"><a href="https://github.com/bevyengine/bevy/pull/11766">Fix <code>CameraProjectionPlugin</code> not implementing <code>Plugin</code> in some cases</a>
<a class="anchor-link" href="#fix-cameraprojectionplugin-not-implementing-plugin-in-some-cases">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p><code>CameraProjectionPlugin&lt;T&gt;</code>s trait bounds now require <code>T</code> to implement <code>CameraProjection</code>, <code>Component</code>, and <code>GetTypeRegistration</code>. This shouldnt affect most existing code as <code>CameraProjectionPlugin&lt;T&gt;</code> never implemented <code>Plugin</code> unless those bounds were met.</p>
<h3 id="add-random-shader-utils-fix-cluster-debug-visualization"><a href="https://github.com/bevyengine/bevy/pull/11956">Add random shader utils, fix cluster_debug_visualization</a>
<a class="anchor-link" href="#add-random-shader-utils-fix-cluster-debug-visualization">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>The <code>bevy_pbr::utils::random1D</code> shader function has been replaced by the similar <code>bevy_pbr::utils::rand_f</code>.</p>
<h3 id="intern-mesh-vertex-buffer-layouts-so-that-we-don-t-have-to-compare-them-over-and-over"><a href="https://github.com/bevyengine/bevy/pull/12216">Intern mesh vertex buffer layouts so that we don't have to compare them over and over.</a>
<a class="anchor-link" href="#intern-mesh-vertex-buffer-layouts-so-that-we-don-t-have-to-compare-them-over-and-over">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>Duplicate <code>MeshVertexBufferLayout</code>s are now combined into a single object, <code>MeshVertexBufferLayoutRef</code>, which contains an atomically-reference-counted pointer to the layout. Code that was using <code>MeshVertexBufferLayout</code> may need to be updated to use <code>MeshVertexBufferLayoutRef</code> instead.</p>
<h3 id="batching-replace-gpuarraybufferindex-index-with-a-u32"><a href="https://github.com/bevyengine/bevy/pull/12250">Batching: replace GpuArrayBufferIndex::index with a u32</a>
<a class="anchor-link" href="#batching-replace-gpuarraybufferindex-index-with-a-u32">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p><code>GpuArrayBufferIndex::index</code> is now a u32 instead of a <code>NonMaxU32</code>. Remove any calls to <code>NonMaxU32::get</code> on the member.</p>
<h3 id="solve-some-oklaba-inconsistencies"><a href="https://github.com/bevyengine/bevy/pull/12526">Solve some oklaba inconsistencies</a>
<a class="anchor-link" href="#solve-some-oklaba-inconsistencies">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>If you were creating a Oklaba instance directly, instead of using L, you should use lightness</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> oklaba <span class="z-keyword z-operator z-assignment z-rust">=</span> Oklaba <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> l<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-type z-rust">Default</span><span class="z-meta z-path z-rust"><span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> oklaba <span class="z-keyword z-operator z-assignment z-rust">=</span> Oklaba <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> lightness<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-float z-rust">1.</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-type z-rust">Default</span><span class="z-meta z-path z-rust"><span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<p>if you were using the function <code>Oklaba::lch</code>, now the method is named <code>Oklaba::lab</code></p>
<h3 id="add-setting-to-enable-disable-shadows-to-materialplugin"><a href="https://github.com/bevyengine/bevy/pull/12538">Add setting to enable/disable shadows to MaterialPlugin</a>
<a class="anchor-link" href="#add-setting-to-enable-disable-shadows-to-materialplugin">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p><code>MaterialPlugin</code> now has a <code>shadows_enabled</code> setting, if you didnt spawn the plugin using <code>::default()</code> or <code>..default()</code>, youll need to set it. <code>shadows_enabled: true</code> is the same behavior as the previous version, and also the default value.</p>
<h3 id="implement-maths-and-animatable-for-srgba"><a href="https://github.com/bevyengine/bevy/pull/12649">Implement maths and <code>Animatable</code> for <code>Srgba</code></a>
<a class="anchor-link" href="#implement-maths-and-animatable-for-srgba">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>The previously existing implementation of mul/div for <code>Srgba</code> did not modify <code>alpha</code> but these operations do modify <code>alpha</code> now. Users need to be aware of this change.</p>
<h3 id="remove-needless-color-specializaion-for-spritepipeline"><a href="https://github.com/bevyengine/bevy/pull/12559">Remove needless color specializaion for <code>SpritePipeline</code></a>
<a class="anchor-link" href="#remove-needless-color-specializaion-for-spritepipeline">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>The raw values for the <code>HDR</code>, <code>TONEMAP_IN_SHADER</code> and <code>DEBAND_DITHER</code> flags have changed, so if you were constructing the pipeline key from raw <code>u32</code>s youll have to account for that.</p>
<h3 id="improve-performance-by-binning-together-opaque-items-instead-of-sorting-them"><a href="https://github.com/bevyengine/bevy/pull/12453">Improve performance by binning together opaque items instead of sorting them.</a>
<a class="anchor-link" href="#improve-performance-by-binning-together-opaque-items-instead-of-sorting-them">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p><code>PhaseItem</code> has been split into <code>BinnedPhaseItem</code> and <code>SortedPhaseItem</code>. If your code has custom <code>PhaseItem</code>s, you will need to migrate them to one of these two types. <code>SortedPhaseItem</code> requires the fewest code changes, but you may want to pick <code>BinnedPhaseItem</code> if your phase doesnt require sorting, as that enables higher performance.</p>
<h3 id="remove-deterministicrenderingconfig"><a href="https://github.com/bevyengine/bevy/pull/12811">remove <code>DeterministicRenderingConfig</code></a>
<a class="anchor-link" href="#remove-deterministicrenderingconfig">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>Removed <code>DeterministicRenderingConfig</code>. There shouldnt be any z fighting anymore in the rendering even without setting <code>stable_sort_z_fighting</code></p>
<h3 id="micro-optimize-queue-material-meshes-primarily-to-remove-bit-manipulation"><a href="https://github.com/bevyengine/bevy/pull/12791">Micro-optimize <code>queue_material_meshes</code>, primarily to remove bit manipulation.</a>
<a class="anchor-link" href="#micro-optimize-queue-material-meshes-primarily-to-remove-bit-manipulation">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<ul>
<li>The <code>primitive_topology</code> field on <code>GpuMesh</code> is now an accessor method: <code>GpuMesh::primitive_topology()</code>.</li>
<li>For performance reasons, <code>MeshPipelineKey</code> has been split into <code>BaseMeshPipelineKey</code>, which lives in <code>bevy_render</code>, and <code>MeshPipelineKey</code>, which lives in <code>bevy_pbr</code>. These two should be combined with bitwise-or to produce the final <code>MeshPipelineKey</code>.</li>
</ul>
<h3 id="disable-ray-query-and-ray-tracing-acceleration-structure-by-default"><a href="https://github.com/bevyengine/bevy/pull/12862">Disable RAY_QUERY and RAY_TRACING_ACCELERATION_STRUCTURE by default</a>
<a class="anchor-link" href="#disable-ray-query-and-ray-tracing-acceleration-structure-by-default">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>If you need  <code>wgpu::Features::RAY_QUERY</code> or <code>wgpu::Features::RAY_TRACING_ACCELERATION_STRUCTURE</code>, enable them explicitly using <code>WgpuSettings::features</code></p>
<h3 id="add-previous-view-uniforms-inverse-view"><a href="https://github.com/bevyengine/bevy/pull/12902">Add previous_view_uniforms.inverse_view</a>
<a class="anchor-link" href="#add-previous-view-uniforms-inverse-view">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<ul>
<li>Renamed <code>prepass_bindings::previous_view_proj</code> to <code>prepass_bindings::previous_view_uniforms.view_proj</code>.</li>
<li>Renamed <code>PreviousViewProjectionUniformOffset</code> to <code>PreviousViewUniformOffset</code>.</li>
<li>Renamed <code>PreviousViewProjection</code> to <code>PreviousViewData</code>.</li>
</ul>
<h3 id="generate-meshuniforms-on-the-gpu-via-compute-shader-where-available"><a href="https://github.com/bevyengine/bevy/pull/12773">Generate <code>MeshUniform</code>s on the GPU via compute shader where available.</a>
<a class="anchor-link" href="#generate-meshuniforms-on-the-gpu-via-compute-shader-where-available">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>Custom render phases now need multiple systems beyond just <code>batch_and_prepare_render_phase</code>. Code that was previously creating custom render phases should now add a <code>BinnedRenderPhasePlugin</code> or <code>SortedRenderPhasePlugin</code> as appropriate instead of directly adding <code>batch_and_prepare_render_phase</code>.</p>
<h3 id="flipping-texture-coords-methods-has-been-added-to-the-standardmaterial"><a href="https://github.com/bevyengine/bevy/pull/12917">flipping texture coords methods has been added to the StandardMaterial</a>
<a class="anchor-link" href="#flipping-texture-coords-methods-has-been-added-to-the-standardmaterial">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>Instead of using <code>Quad::flip</code> field, call <code>flipped(true, false)</code> method on the StandardMaterial instance when adding the mesh.</p>
<h3 id="implement-percentage-closer-filtering-pcf-for-point-lights"><a href="https://github.com/bevyengine/bevy/pull/12910">Implement percentage-closer filtering (PCF) for point lights.</a>
<a class="anchor-link" href="#implement-percentage-closer-filtering-pcf-for-point-lights">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p><code>ShadowFilteringMethod::Castano13</code> and <code>ShadowFilteringMethod::Jimenez14</code> have been renamed to <code>ShadowFilteringMethod::Gaussian</code> and <code>ShadowFilteringMethod::Temporal</code> respectively.</p>
<h3 id="divide-the-single-visibleentities-list-into-separate-lists-for-2d-meshes-3d-meshes-lights-and-ui-elements-for-performance"><a href="https://github.com/bevyengine/bevy/pull/12582">Divide the single <code>VisibleEntities</code> list into separate lists for 2D meshes, 3D meshes, lights, and UI elements, for performance.</a>
<a class="anchor-link" href="#divide-the-single-visibleentities-list-into-separate-lists-for-2d-meshes-3d-meshes-lights-and-ui-elements-for-performance">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p><code>check_visibility</code> and <code>VisibleEntities</code> now store the four types of renderable entities2D meshes, 3D meshes, lights, and UI elementsseparately. If your custom rendering code examines <code>VisibleEntities</code>, it will now need to specify which type of entity its interested in using the <code>WithMesh2d</code>, <code>WithMesh</code>, <code>WithLight</code>, and <code>WithNode</code> types respectively. If your app introduces a new type of renderable entity, youll need to add an instance of the <code>check_visibility</code> system with the appropriate query filter to the main world schedule to accommodate your new component or components. For example:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust">app
</span><span class="z-source z-rust">    <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">add_systems</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">        PostUpdate<span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">        <span class="z-meta z-path z-rust">check_visibility<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span><span class="z-meta z-generic z-rust">With<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>MyCustomRenderable<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">            <span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">in_set</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-path z-rust">VisibilitySystems<span class="z-punctuation z-accessor z-rust">::</span></span>CheckVisibility</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust">    </span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="fix-rendering-of-sprites-text-and-meshlets-after-12582"><a href="https://github.com/bevyengine/bevy/pull/12945">Fix rendering of sprites, text, and meshlets after #12582.</a>
<a class="anchor-link" href="#fix-rendering-of-sprites-text-and-meshlets-after-12582">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p><code>Text</code> now requires a <code>SpriteSource</code> marker component in order to appear. This component has been added to <code>Text2dBundle</code>.</p>
<h3 id="expose-desired-maximum-frame-latency-through-window-creation"><a href="https://github.com/bevyengine/bevy/pull/12954">Expose <code>desired_maximum_frame_latency</code> through window creation</a>
<a class="anchor-link" href="#expose-desired-maximum-frame-latency-through-window-creation">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>The <code>desired_maximum_frame_latency</code> field must be added to instances of <code>Window</code> and <code>ExtractedWindow</code> where all fields are explicitly specified.</p>
<h3 id="fix-cameraprojection-panic-and-improve-cameraprojectionplugin"><a href="https://github.com/bevyengine/bevy/pull/11808">Fix <code>CameraProjection</code> panic and improve <code>CameraProjectionPlugin</code></a>
<a class="anchor-link" href="#fix-cameraprojection-panic-and-improve-cameraprojectionplugin">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p><code>VisibilitySystems</code>s <code>UpdateOrthographicFrusta</code>, <code>UpdatePerspectiveFrusta</code>, and <code>UpdateProjectionFrusta</code> variants were removed, they were replaced with <code>VisibilitySystems::UpdateFrusta</code></p>
<h3 id="implement-filmic-color-grading"><a href="https://github.com/bevyengine/bevy/pull/13121">Implement filmic color grading.</a>
<a class="anchor-link" href="#implement-filmic-color-grading">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<ul>
<li><code>ColorGrading::gamma</code> and <code>ColorGrading::pre_saturation</code> are now set separately for the <code>shadows</code>, <code>midtones</code>, and <code>highlights</code> sections. You can migrate code with the <code>ColorGrading::all_sections</code> and <code>ColorGrading::all_sections_mut</code> functions, which access and/or update all sections at once.</li>
<li><code>ColorGrading::post_saturation</code> and <code>ColorGrading::exposure</code> are now fields of <code>ColorGrading::global</code>.</li>
</ul>
<h3 id="add-buffervec-an-higher-performance-alternative-to-storagebuffer-and-make-gpuarraybuffer-use-it"><a href="https://github.com/bevyengine/bevy/pull/13199">Add BufferVec, an higher-performance alternative to StorageBuffer, and make GpuArrayBuffer use it.</a>
<a class="anchor-link" href="#add-buffervec-an-higher-performance-alternative-to-storagebuffer-and-make-gpuarraybuffer-use-it">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p><code>BufferVec</code> has been renamed to <code>RawBufferVec</code> and a new similar type has taken the <code>BufferVec</code> name.</p>
<h3 id="implement-clearcoat-per-the-filament-and-the-khr-materials-clearcoat-specifications"><a href="https://github.com/bevyengine/bevy/pull/13031">Implement clearcoat per the Filament and the <code>KHR_materials_clearcoat</code> specifications.</a>
<a class="anchor-link" href="#implement-clearcoat-per-the-filament-and-the-khr-materials-clearcoat-specifications">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<ul>
<li>
<p>The lighting functions in the <code>pbr_lighting</code> WGSL module now have clearcoat parameters, if <code>STANDARD_MATERIAL_CLEARCOAT</code> is defined.</p>
</li>
<li>
<p>The <code>R</code> reflection vector parameter has been removed from some lighting functions, as it was unused.</p>
</li>
</ul>
<h3 id="clean-up-2d-render-phases"><a href="https://github.com/bevyengine/bevy/pull/12982">Clean up 2d render phases</a>
<a class="anchor-link" href="#clean-up-2d-render-phases">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>If you were using <code>Node2d::MainPass</code> to order your own custom render node. You now need to order it relative to <code>Node2d::StartMainPass</code> or <code>Node2d::EndMainPass</code>.</p>
<h3 id="12502-remove-limit-on-renderlayers"><a href="https://github.com/bevyengine/bevy/pull/13317">#12502 Remove limit on RenderLayers.</a>
<a class="anchor-link" href="#12502-remove-limit-on-renderlayers">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p><code>RenderLayers::all()</code> no longer exists. Entities expecting to be visible on all layers, e.g. lights, should compute the active layers that are in use.</p>
<h3 id="add-emissive-exposure-weight-to-the-standardmaterial"><a href="https://github.com/bevyengine/bevy/pull/13350">Add emissive_exposure_weight to the StandardMaterial</a>
<a class="anchor-link" href="#add-emissive-exposure-weight-to-the-standardmaterial">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<!-- TODO -->
<h3 id="make-render-phases-render-world-resources-instead-of-components"><a href="https://github.com/bevyengine/bevy/pull/13277">Make render phases render world resources instead of components.</a>
<a class="anchor-link" href="#make-render-phases-render-world-resources-instead-of-components">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<p>The <code>BinnedRenderPhase</code> and <code>SortedRenderPhase</code> render world components have been replaced with <code>ViewBinnedRenderPhases</code> and <code>ViewSortedRenderPhases</code> resources. Instead of querying for the components, look the camera entity up in the <code>ViewBinnedRenderPhases</code>/<code>ViewSortedRenderPhases</code> tables.</p>
<h3 id="more-idiomatic-texture-atlas-builder"><a href="https://github.com/bevyengine/bevy/pull/13238">More idiomatic texture atlas builder</a>
<a class="anchor-link" href="#more-idiomatic-texture-atlas-builder">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<pre data-lang="diff" class="language-diff z-code"><code class="language-diff" data-lang="diff"><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span> let mut texture_atlas_builder = TextureAtlasBuilder::default().padding(UVec2::default()).format(..);
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span> let mut texture_atlas_builder = TextureAtlasBuilder::default();
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span> texture_atlas_builder.padding(UVec2::default()).format(..);
</span></span><span class="z-source z-diff">
</span><span class="z-source z-diff"><span class="z-markup z-deleted z-diff"><span class="z-punctuation z-definition z-deleted z-diff">-</span> let (texture_atlas_layout, texture) = texture_atlas_builder.finish().unwrap();
</span></span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span> let (texture_atlas_layout, texture) = texture_atlas_builder.build().unwrap();
</span></span></code></pre>
<h3 id="move-clustering-related-types-and-functions-into-their-own-module"><a href="https://github.com/bevyengine/bevy/pull/13640">Move clustering-related types and functions into their own module.</a>
<a class="anchor-link" href="#move-clustering-related-types-and-functions-into-their-own-module">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<ul>
<li>Clustering-related types and functions (e.g. <code>assign_lights_to_clusters</code>) have moved under <code>bevy_pbr::cluster</code>, in preparation for the ability to cluster objects other than lights.</li>
</ul>
<h3 id="normalise-matrix-naming"><a href="https://github.com/bevyengine/bevy/pull/13489">Normalise matrix naming</a>
<a class="anchor-link" href="#normalise-matrix-naming">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<ul>
<li><code>Frustum</code>s <code>from_view_projection</code>, <code>from_view_projection_custom_far</code> and <code>from_view_projection_no_far</code> were renamed to <code>from_clip_from_world</code>, <code>from_clip_from_world_custom_far</code> and <code>from_clip_from_world_no_far</code>.</li>
<li><code>ComputedCameraValues::projection_matrix</code> was renamed to <code>clip_from_view</code>.</li>
<li><code>CameraProjection::get_projection_matrix</code> was renamed to <code>get_clip_from_view</code> (this affects implementations on <code>Projection</code>, <code>PerspectiveProjection</code> and <code>OrthographicProjection</code>).</li>
<li><code>ViewRangefinder3d::from_view_matrix</code> was renamed to <code>from_world_from_view</code>.</li>
<li><code>PreviousViewData</code>s members were renamed to <code>view_from_world</code> and <code>clip_from_world</code>.</li>
<li><code>ExtractedView</code>s <code>projection</code>, <code>transform</code> and <code>view_projection</code> were renamed to <code>clip_from_view</code>, <code>world_from_view</code> and <code>clip_from_world</code>.</li>
<li><code>ViewUniform</code>s <code>view_proj</code>, <code>unjittered_view_proj</code>, <code>inverse_view_proj</code>, <code>view</code>, <code>inverse_view</code>, <code>projection</code> and <code>inverse_projection</code> were renamed to <code>clip_from_world</code>, <code>unjittered_clip_from_world</code>, <code>world_from_clip</code>, <code>world_from_view</code>, <code>view_from_world</code>, <code>clip_from_view</code> and <code>view_from_clip</code>.</li>
<li><code>GpuDirectionalCascade::view_projection</code> was renamed to <code>clip_from_world</code>.</li>
<li><code>MeshTransforms</code> <code>transform</code> and <code>previous_transform</code> were renamed to <code>world_from_local</code> and <code>previous_world_from_local</code>.</li>
<li><code>MeshUniform</code>s <code>transform</code>, <code>previous_transform</code>, <code>inverse_transpose_model_a</code> and <code>inverse_transpose_model_b</code> were renamed to <code>world_from_local</code>, <code>previous_world_from_local</code>, <code>local_from_world_transpose_a</code> and <code>local_from_world_transpose_b</code> (the <code>Mesh</code> type in WGSL mirrors this, however <code>transform</code> and <code>previous_transform</code> were named <code>model</code> and <code>previous_model</code>).</li>
<li><code>Mesh2dTransforms::transform</code> was renamed to <code>world_from_local</code>.</li>
<li><code>Mesh2dUniform</code>s <code>transform</code>, <code>inverse_transpose_model_a</code> and <code>inverse_transpose_model_b</code> were renamed to <code>world_from_local</code>, <code>local_from_world_transpose_a</code> and <code>local_from_world_transpose_b</code> (the <code>Mesh2d</code> type in WGSL mirrors this).</li>
<li>In WGSL, in <code>bevy_pbr::mesh_functions</code>, <code>get_model_matrix</code> and <code>get_previous_model_matrix</code> were renamed to <code>get_world_from_local</code> and <code>get_previous_world_from_local</code>.</li>
<li>In WGSL, <code>bevy_sprite::mesh2d_functions::get_model_matrix</code> was renamed to <code>get_world_from_local</code>.</li>
</ul>
<h3 id="rename-point-light-to-clusterable-object-in-cluster-contexts"><a href="https://github.com/bevyengine/bevy/pull/13654">Rename &quot;point light&quot; to &quot;clusterable object&quot; in cluster contexts.</a>
<a class="anchor-link" href="#rename-point-light-to-clusterable-object-in-cluster-contexts">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
</div>
<ul>
<li>In the PBR shaders, <code>point_lights</code> is now known as <code>clusterable_objects</code>, <code>PointLight</code> is now known as <code>ClusterableObject</code>, and <code>cluster_light_index_lists</code> is now known as <code>clusterable_object_index_lists</code>.</li>
</ul>
<h3 id="deprecate-spritesheetbundle-and-atlasimagebundle"><a href="https://github.com/bevyengine/bevy/pull/12218">Deprecate <code>SpriteSheetBundle</code> and <code>AtlasImageBundle</code></a>
<a class="anchor-link" href="#deprecate-spritesheetbundle-and-atlasimagebundle">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
<div class="migration-guide-area-tag">UI</div>
</div>
<p><code>SpriteSheetBundle</code> has been deprecated. Insert the <code>TextureAtlas</code> component alongside a <code>SpriteBundle</code> instead.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>SpriteSheetBundle <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    texture<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    atlas<span class="z-punctuation z-separator z-rust">:</span> TextureAtlas <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        layout<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    SpriteBundle <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        texture<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    TextureAtlas <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        layout<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<p><code>AtlasImageBundle</code> has been deprecated. Insert the <code>TextureAtlas</code> component alongside an <code>ImageBundle</code> instead.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>AtlasImageBundle <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    image<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    atlas<span class="z-punctuation z-separator z-rust">:</span> TextureAtlas <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        layout<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust">commands<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">spawn</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    ImageBundle <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        image<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust">    TextureAtlas <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        layout<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-group z-rust"></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="decouple-backgroundcolor-from-uiimage"><a href="https://github.com/bevyengine/bevy/pull/11165">Decouple <code>BackgroundColor</code> from <code>UiImage</code></a>
<a class="anchor-link" href="#decouple-backgroundcolor-from-uiimage">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
<div class="migration-guide-area-tag">UI</div>
</div>
<p>The <a href="https://docs.rs/bevy/0.14.0/bevy/prelude/struct.BackgroundColor.html"><code>BackgroundColor</code></a> component now renders a solid-color background behind <a href="https://docs.rs/bevy/0.14.0/bevy/prelude/struct.UiImage.html#structfield.color"><code>UiImage</code></a> instead of tinting its color. Use the <code>color</code> field of <code>UiImage</code> for tinting.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust">ButtonBundle <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    background_color<span class="z-punctuation z-separator z-rust">:</span> my_color<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">into</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust">ButtonBundle <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    image<span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-path z-rust">UiImage<span class="z-punctuation z-accessor z-rust">::</span></span>default<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">with_color</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>my_color</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-range z-rust">..</span><span class="z-support z-function z-rust">default</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></code></pre>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">button_system</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">query</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-rust">&amp;</span>Interaction, <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-rust">mut</span> BackgroundColor<span class="z-punctuation z-section z-group z-end z-rust">)</span>, <span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-generic z-rust">Changed<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>Interaction<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span>, <span class="z-meta z-generic z-rust">With<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>Button<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span><span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>interaction<span class="z-punctuation z-separator z-rust">,</span> <span class="z-storage z-modifier z-rust">mut</span> color</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-rust">in</span> <span class="z-keyword z-operator z-bitwise z-rust">&amp;</span><span class="z-storage z-modifier z-rust">mut</span> query <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-control z-rust">match</span> <span class="z-keyword z-operator z-arithmetic z-rust">*</span>interaction <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            <span class="z-meta z-path z-rust">Interaction<span class="z-punctuation z-accessor z-rust">::</span></span>Pressed <span class="z-keyword z-operator z-rust">=&gt;</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                <span class="z-keyword z-operator z-arithmetic z-rust">*</span>color <span class="z-keyword z-operator z-assignment z-rust">=</span> my_color<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">into</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">button_system</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-storage z-modifier z-rust">mut</span> <span class="z-variable z-parameter z-rust">query</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Query<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-rust">&amp;</span>Interaction, <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-rust">mut</span> UiImage<span class="z-punctuation z-section z-group z-end z-rust">)</span>, <span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-generic z-rust">Changed<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>Interaction<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span>, <span class="z-meta z-generic z-rust">With<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>Button<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span><span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>interaction<span class="z-punctuation z-separator z-rust">,</span> <span class="z-storage z-modifier z-rust">mut</span> image</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-rust">in</span> <span class="z-keyword z-operator z-bitwise z-rust">&amp;</span><span class="z-storage z-modifier z-rust">mut</span> query <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-control z-rust">match</span> <span class="z-keyword z-operator z-arithmetic z-rust">*</span>interaction <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            <span class="z-meta z-path z-rust">Interaction<span class="z-punctuation z-accessor z-rust">::</span></span>Pressed <span class="z-keyword z-operator z-rust">=&gt;</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">                image<span class="z-punctuation z-accessor z-dot z-rust">.</span>color <span class="z-keyword z-operator z-assignment z-rust">=</span> my_color<span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">            <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> ...
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<p>Some UI systems have been split or renamed.</p>
<ul>
<li><code>bevy_ui::RenderUiSystem::ExtractNode</code> has been split into <code>ExtractBackgrounds</code>, <code>ExtractImages</code>, <code>ExtractBorders</code>, and <code>ExtractText</code>.</li>
<li><code>bevy_ui::extract_uinodes</code> has been split into <code>bevy_ui::extract_uinode_background_colors</code> and <code>bevy_ui::extract_uinode_images</code>.</li>
<li><code>bevy_ui::extract_text_uinodes</code> has been renamed to <code>extract_uinode_text</code>.</li>
</ul>
<h3 id="fix-ui-elements-randomly-not-appearing-after-13277"><a href="https://github.com/bevyengine/bevy/pull/13462">Fix UI elements randomly not appearing after #13277.</a>
<a class="anchor-link" href="#fix-ui-elements-randomly-not-appearing-after-13277">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
<div class="migration-guide-area-tag">UI</div>
</div>
<p>The <code>bevy_ui::render::extract_default_ui_camera_view</code> system is no longer parameterized over the specific type of camera and is hard-wired to either <code>Camera2d</code> or <code>Camera3d</code> components.</p>
<h3 id="fix12527-changes-to-make-serde-optional-for-bevy-color"><a href="https://github.com/bevyengine/bevy/pull/12666">FIX12527: Changes to make serde optional for bevy_color</a>
<a class="anchor-link" href="#fix12527-changes-to-make-serde-optional-for-bevy-color">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
<div class="migration-guide-area-tag">Utils</div>
</div>
<p>If user wants color data structures to be serializable, then application needs to be build with flag serialize</p>
<h3 id="configure-surface-needs-to-be-on-the-main-thread-on-ios"><a href="https://github.com/bevyengine/bevy/pull/12055">configure_surface needs to be on the main thread on iOS</a>
<a class="anchor-link" href="#configure-surface-needs-to-be-on-the-main-thread-on-ios">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
<div class="migration-guide-area-tag">Windowing</div>
</div>
<p>The <code>need_new_surfaces</code> system has been renamed <code>need_surface_configuration</code>.</p>
<h3 id="introduce-a-windowwrapper-to-extend-the-lifetime-of-the-window-when-using-pipelined-rendering"><a href="https://github.com/bevyengine/bevy/pull/12978">Introduce a <code>WindowWrapper</code> to extend the lifetime of the window when using pipelined rendering</a>
<a class="anchor-link" href="#introduce-a-windowwrapper-to-extend-the-lifetime-of-the-window-when-using-pipelined-rendering">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Rendering</div>
<div class="migration-guide-area-tag">Windowing</div>
</div>
<p>Windowing backends now need to store their window in the new <code>WindowWrapper</code>.</p>
<h3 id="add-an-index-argument-to-parallel-iteration-helpers-in-bevy-tasks"><a href="https://github.com/bevyengine/bevy/pull/12169">Add an index argument to parallel iteration helpers in bevy_tasks</a>
<a class="anchor-link" href="#add-an-index-argument-to-parallel-iteration-helpers-in-bevy-tasks">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Tasks</div>
</div>
<p>Functions passed as arguments to <code>par_chunk_map</code>, <code>par_splat_map</code>, <code>par_chunk_map_mut</code>, and <code>par_splat_map_mut</code> now take an additional index argument.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.13
</span></span><span class="z-source z-rust">items<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">par_chunk_map</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&amp;</span>task_pool<span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">100</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">|</span></span></span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-variable z-parameter z-rust">chunk</span><span class="z-punctuation z-section z-parameters z-end z-rust">|</span></span> </span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> <span class="z-comment z-block z-rust"><span class="z-punctuation z-definition z-comment z-rust">/*</span> ... <span class="z-punctuation z-definition z-comment z-rust">*/</span></span> </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> 0.14
</span></span><span class="z-source z-rust">items<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">par_chunk_map</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&amp;</span>task_pool<span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">100</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">|</span></span></span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-variable z-parameter z-rust">_index</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-variable z-parameter z-rust">chunk</span><span class="z-punctuation z-section z-parameters z-end z-rust">|</span></span> </span><span class="z-meta z-function z-closure z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> <span class="z-comment z-block z-rust"><span class="z-punctuation z-definition z-comment z-rust">/*</span> ... <span class="z-punctuation z-definition z-comment z-rust">*/</span></span> </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<h3 id="restore-pre-0-13-1-root-node-layout-behavior"><a href="https://github.com/bevyengine/bevy/pull/12698">Restore pre 0.13.1 Root Node Layout behavior</a>
<a class="anchor-link" href="#restore-pre-0-13-1-root-node-layout-behavior">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">UI</div>
</div>
<p>If you were affected by the 0.13.1 regression and added <code>position_type: Absolute</code> to all your root nodes you might be able to reclaim some LOC by removing them now that the 0.13 behavior is restored.</p>
<h3 id="rename-rect-inset-method-to-inflate"><a href="https://github.com/bevyengine/bevy/pull/13452">Rename <code>Rect</code> <code>inset()</code> method to <code>inflate()</code></a>
<a class="anchor-link" href="#rename-rect-inset-method-to-inflate">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">UI</div>
</div>
<p>Replace <code>Rect::inset()</code>, <code>IRect::inset()</code> and <code>URect::inset()</code> calls with <code>inflate()</code>.</p>
<h3 id="updates-default-text-font-size-to-24px"><a href="https://github.com/bevyengine/bevy/pull/13603">Updates default Text font size to 24px</a>
<a class="anchor-link" href="#updates-default-text-font-size-to-24px">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">UI</div>
</div>
<ul>
<li>The default font size has been increased to 24px from 12px. Make sure you set the font to the appropriate values in places you were using <code>Default</code> text style.</li>
</ul>
<h3 id="disentangle-bevy-utils-bevy-core-s-reexported-dependencies"><a href="https://github.com/bevyengine/bevy/pull/12313">Disentangle bevy_utils/bevy_core's reexported dependencies</a>
<a class="anchor-link" href="#disentangle-bevy-utils-bevy-core-s-reexported-dependencies">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Utils</div>
</div>
<p><code>bevy_utils</code> no longer re-exports <code>petgraph</code>, <code>uuid</code>, <code>nonmax</code>, <code>smallvec</code>, or <code>thiserror</code>.</p>
<p><code>bevy_core</code> no longer re-exports <code>bytemuck</code>s <code>bytes_of</code>, <code>cast_slice</code>, <code>Pod</code>, and <code>Zeroable</code>.</p>
<p>You can add these as dependencies in your own <code>Cargo.toml</code> instead.</p>
<h3 id="fix-fit-canvas-to-parent"><a href="https://github.com/bevyengine/bevy/pull/11278">Fix fit_canvas_to_parent</a>
<a class="anchor-link" href="#fix-fit-canvas-to-parent">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Windowing</div>
</div>
<p>Cancels the migration from https://github.com/bevyengine/bevy/pull/11057</p>
<h3 id="clean-up-winitwindows-remove-window"><a href="https://github.com/bevyengine/bevy/pull/12749">Clean up WinitWindows::remove_window</a>
<a class="anchor-link" href="#clean-up-winitwindows-remove-window">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Windowing</div>
</div>
<p><code>WinitWindows::get_window_entity</code> now returns <code>None</code> after a window is closed, instead of a dead entity.</p>
<h3 id="ensure-clean-exit"><a href="https://github.com/bevyengine/bevy/pull/13236">Ensure clean exit</a>
<a class="anchor-link" href="#ensure-clean-exit">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Windowing</div>
</div>
<p>Ensure custom exit logic does not rely on the app exiting the same frame as a window is closed.</p>
<h3 id="fix-upgrade-to-winit-v0-30"><a href="https://github.com/bevyengine/bevy/pull/13366">fix: upgrade to winit v0.30</a>
<a class="anchor-link" href="#fix-upgrade-to-winit-v0-30">#</a>
</h3>
<div class="migration-guide-area-tags">
<div class="migration-guide-area-tag">Windowing</div>
</div>
<p>The custom UserEvent is now renamed as WakeUp, used to wake up the loop if anything happens outside the app (a new <a href="https://github.com/bevyengine/bevy/pull/13366/files#diff-2de8c0a8d3028d0059a3d80ae31b2bbc1cde2595ce2d317ea378fe3e0cf6ef2d">custom_user_event</a> shows this behavior.</p>
<p>The internal <code>UpdateState</code> has been removed and replaced internally by the AppLifecycle. When changed, the AppLifecycle is sent as an event.</p>
<p>The <code>UpdateMode</code> now accepts only two values: <code>Continuous</code> and <code>Reactive</code>, but the latter exposes 3 new properties to enable reactive to device, user or window events. The previous <code>UpdateMode::Reactive</code> is now equivalent to <code>UpdateMode::reactive()</code>, while <code>UpdateMode::ReactiveLowPower</code> to <code>UpdateMode::reactive_low_power()</code>.</p>
<p>The <code>ApplicationLifecycle</code> has been renamed as <code>AppLifecycle</code>, and now contains the possible values of the application state inside the event loop: </p>
<ul>
<li><code>Idle</code>: the loop has not started yet</li>
<li><code>Running</code> (previously called <code>Started</code>): the loop is running</li>
<li><code>WillSuspend</code>: the loop is going to be suspended</li>
<li><code>Suspended</code>: the loop is suspended</li>
<li><code>WillResume</code>: the loop is going to be resumed</li>
</ul>
<p>Note: the <code>Resumed</code> state has been removed since the resumed app is just running.</p>
<p>Finally, now that <code>winit</code> enables this, it extends the <code>WinitPlugin</code> to support custom events.</p>
</div>

        
      </div>
      <div class="docs-footer print:hidden">
        <nav class="docs-footer__nav">
          
            <a class="docs-footer__link docs-footer__link--next"
                href="&#x2F;learn&#x2F;migration-guides&#x2F;0-12-to-0-13&#x2F;"
                data-docs-nav-next>
              <div class="docs-footer__label">
                <div class="docs-footer__dir">Next</div>
                0.12 to 0.13
              </div>
              <i class="docs-footer__chevron icon icon--chevron-right"></i>
            </a>
          
          
            <a class="docs-footer__link docs-footer__link--prev"
                href="&#x2F;learn&#x2F;migration-guides&#x2F;introduction&#x2F;"
                data-docs-nav-previous>
              <div class="docs-footer__label">
                <div class="docs-footer__dir">Previous</div>
                Introduction
              </div>
              <i class="docs-footer__chevron icon icon--chevron-left"></i>
            </a>
          
        </nav>
        <div class="docs-footer__edit-wrapper">
          <a class="docs-footer__edit"
              href="https://github.com/bevyengine/bevy-website/edit/main/content/learn&#x2F;migration-guides&#x2F;0.13-to-0.14.md">
            <i class="icon icon--pencil"></i>
            Improve this page
          </a>
        </div>
      </div>
    </div>
  </div>

    </div>
  </div>

        </div>
      </main>
      <footer class="print:hidden">
        
        <div class="footer__social-container">
          <a class="footer__social" href="https://github.com/bevyengine/bevy">
            <img src="/assets/github-mark-white.svg"
                  alt="Bevy engine's GitHub repo"
                  width="32"
                  height="32" />
          </a>
          <a class="footer__social" href="https://discord.gg/bevy">
            <img src="/assets/discord.svg"
                  alt="Bevy Discord server"
                  width="32"
                  height="32" />
          </a>
          <a class="footer__social" href="https://mastodon.social/@bevy">
            <img src="/assets/mastodon-logo-purple.svg"
                  alt="Bevy Mastodon account"
                  width="32"
                  height="32" />
          </a>
          <a class="footer__social" href="https://twitter.com/BevyEngine">
            <img src="/assets/twitter.svg"
                  alt="Bevy Twitter account"
                  width="32"
                  height="32" />
          </a>
          <a class="footer__social" href="https://www.reddit.com/r/bevy/">
            <img src="/assets/reddit.svg"
                  alt="Bevy subreddit"
                  width="32"
                  height="32" />
          </a>
          <a class="footer__social" href="/atom.xml">
            <img src="/assets/feed.svg"
                  alt="Bevy news feed"
                  width="32"
                  height="32" />
          </a>
        </div>
      </footer>
    </div>
    <script>
    const search_params = new URLSearchParams(window.location.search);
    if (search_params.has("show_drafts") || document.cookie.indexOf("show_drafts") >= 0) {
      if (search_params.get("show_drafts") === "0") {
        document.cookie = "show_drafts=;path=/;expires=Thu, 01 Jan 1970 00:00:00 UTC";
      } else {
        document.cookie = "show_drafts=1;path=/"
        document.body.classList.add('show_drafts');
      }
    }
    </script>
  </body>
</html>
